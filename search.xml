<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Butterfly主题高级配置</title>
      <link href="/posts/3/"/>
      <url>/posts/3/</url>
      
        <content type="html"><![CDATA[<p>高级配置</p><p>豆瓣插件</p><ol><li><p>进入博客根目录，右键git bash，输入以下命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-douban --save</span><br></pre></td></tr></table></figure></li><li><p>站点配置文件_config.yml中添加如下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 豆瓣</span></span><br><span class="line"><span class="attr">douban:</span></span><br><span class="line">  <span class="attr">user:</span> <span class="number">211251422</span></span><br><span class="line">  <span class="attr">builtin:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">book:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">  <span class="attr">movie:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">    <span class="attr">quote:</span> <span class="string">&#x27;xxxx&#x27;</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">10000</span> </span><br></pre></td></tr></table></figure><p>说明：</p><ol><li><p>user：豆瓣ID。登入豆瓣账户，右上角点击 ”个人主页“，地址栏URL<code>https://www.douban.com/people/xxxxxx/ </code>中的”xxxxxx”即个人ID</p></li><li><p>builtin: 是否将生成页面的功能嵌入 hexo s 和 hexo g 中，默认是 false ，另一可选项为 true</p></li><li><p>title: 该页面的标题</p></li><li><p>quote: 写在页面开头的一段话</p></li><li><p>timeout: 爬取数据的超时时间，默认是 10000ms（可适当延长）</p></li></ol></li><li><p>在主题config.yml文件，写入以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果你有使用hexo-douban，可配置這個</span></span><br><span class="line"><span class="attr">douban:</span></span><br><span class="line">   <span class="attr">meta:</span> <span class="literal">true</span></span><br><span class="line">   <span class="attr">movies_img:</span> <span class="string">xxx</span>  <span class="comment"># 电影界面的背景图片</span></span><br><span class="line">   <span class="attr">books_img:</span> <span class="string">xxx</span>    <span class="comment"># 书单界面的背景图片</span></span><br><span class="line"><span class="comment">#  games_img:</span></span><br></pre></td></tr></table></figure></li><li><p>创建books和movies界面（若已经存在界面，忽略此步骤即可）</p><p>博客根目录下，git bash中输入如下命令：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page movies</span><br></pre></td></tr></table></figure><p>找到<code>source/movies/index.md</code>文件，添加<code>type: &quot;movies&quot;</code></p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 电影</span><br><span class="line">date: 2020-04-19 12:58:56</span><br><span class="line"><span class="section">type: &quot;movies&quot;</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><p>books界面也是如此。</p></li><li><p>hexo clean清除数据后，依次运行如下命令</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo douban -bgm   # 该命令会自动爬取豆瓣账户下在看/想看/已看的书籍或电影（前提是自己在豆瓣中已经标记出在看/想看/已看），bgm分别代表book,game,movie，需要哪个就输入对应的命令</span><br><span class="line">hexo g</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p>在浏览器中查看是否配置成功。</p></li></ol><p>添加评论系统</p><p>通用设置</p><p>打开主题配置文件，开启评论:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="comment"># Up to two comments system, the first will be shown as default</span></span><br><span class="line">  <span class="comment"># Choose: Disqus/Disqusjs/Livere/Gitalk/Valine/Waline/Utterances/Facebook Comments/Twikoo</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Valine,Disqus</span> <span class="comment"># 第一个为默认展示评论系统</span></span><br><span class="line">  <span class="attr">text:</span> <span class="literal">true</span> <span class="comment"># Display the comment name next to the button</span></span><br><span class="line">  <span class="comment"># lazyload: The comment system will be load when comment element enters the browser&#x27;s viewport.</span></span><br><span class="line">  <span class="comment"># If you set it to true, the comment count will be invalid</span></span><br><span class="line">  <span class="attr">lazyload:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">count:</span> <span class="literal">true</span> <span class="comment"># Display comment count in top_img</span></span><br><span class="line">  <span class="attr">card_post_count:</span> <span class="literal">false</span> <span class="comment"># Display comment count in Home Page</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>参数说明：</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>use</td><td>使用的评论系统，最多两个，如果不使用可以留空</td></tr><tr><td>text</td><td>展示评论系统的名字</td></tr><tr><td>lazyload</td><td>懒加载，只有滚动到对应位置时才会加载评论</td></tr><tr><td>count</td><td>是否在文章顶部展示评论数</td></tr><tr><td>card_post_count</td><td>是否在首页文章卡片显示评论数，gitalk不支持</td></tr></tbody></table><p>valine配置（不推荐）</p><p>Valine国际版自带一个免费二级域名（现在好像不可用），国内版需要已经备案的域名，个人最开始使用的是Valine，但后来考虑到安全问题，配置的复杂程度以及稳定性等因素，弃用了valine，转向了twikoo以及gitalk！</p><p><strong>基本配置教程：</strong></p><p><a href="https://www.heson10.com/posts/28396.html">详细教程1</a></p><p><a href="https://zhuanlan.zhihu.com/p/158120667">详细教程2</a></p><p><a href="https://blog.csdn.net/qq_35117024/article/details/107248047?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-5.pc_relevant_paycolumn_v3&amp;spm=1001.2101.3001.4242.4&amp;utm_relevant_index=8">详细教程3</a></p><p>注：以上三个链接内容大致相同，但其中有些内容已经过时，取其精华，弃其糟粕即可</p><p>自己的配置过程：</p><ol><li><p>注册learncloud</p><ul><li>国际版自带一个免费二级域名用于后台消息管理，但不稳定；</li><li>国内版稳定，但若想实现后台消息管理则需要备案过的域名。</li><li>个人用的是国内版，域名是从阿里云购买的（U1S1，国际版真的太不稳定了，各种莫名奇妙的错误）。</li></ul></li><li><p>创建免费应用（无需赘述）</p></li><li><p>在设置-应用凭证中可以看到AppID和APPKey，复制到本地主题配置文件中valine对应的部分</p></li><li><p>在设置-安全中心添加Web安全域名，也就是博客的地址，多个地址需要换行</p></li><li><p>换用魔改JS：<a href="https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BA%86%E8%87%AA%E5%8A%A8%E8%AF%86%E5%88%AB%E9%82%AE%E7%AE%B1%EF%BC%8C%E5%8D%9A%E4%B8%BB%E6%A0%87%E8%AF%86%E7%AD%89%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%9C%A8%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%ADvaline%E5%AF%B9%E5%BA%94%E7%9A%84cdn%E5%A4%84%E8%B0%83%E7%94%A8%E5%8D%B3%E5%8F%AF%EF%BC%8C%E6%B3%A8%E6%84%8F%E9%9C%80%E8%A6%81%E6%8A%8A%E5%8E%9F%E6%9D%A5%E7%9A%84js%E6%96%87%E4%BB%B6%E6%B3%A8%E9%87%8A%E6%8E%89%E3%80%82">https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js，添加了自动识别邮箱，博主标识等功能，在主题配置文件中valine对应的cdn处调用即可，注意需要把原来的js文件注释掉。</a></p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/valine%E9%AD%94%E6%94%B9js%E8%B0%83%E7%94%A8.png" alt="valine魔改js调用"></p><p>在主题配置文件中还需配置以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="comment"># appId</span></span><br><span class="line">  <span class="attr">appKey:</span> <span class="comment"># appKey</span></span><br><span class="line">  <span class="attr">pageSize:</span> <span class="number">10</span> <span class="comment"># 每页展示的评论数量</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="string">monsterid</span> <span class="comment"># gravatar style  https://valine.js.org/#/avatar</span></span><br><span class="line">  <span class="attr">lang:</span> <span class="string">zh-CN</span>  <span class="comment"># 语言</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">xxx</span>  <span class="comment"># 评论窗口默认文字</span></span><br><span class="line">  <span class="attr">guest_info:</span> <span class="string">nick,mail,link</span></span><br><span class="line">  <span class="attr">recordIP:</span> <span class="literal">false</span> <span class="comment"># 记录访客IP</span></span><br><span class="line">  <span class="attr">serverURLs:</span> <span class="comment"># This configuration is suitable for domestic custom domain name users, overseas version will be automatically detected (no need to manually fill in)</span></span><br><span class="line">  <span class="attr">bg:</span> <span class="comment"># 背景图</span></span><br><span class="line">  <span class="comment"># emojiCDN: false</span></span><br><span class="line">  <span class="attr">enableQQ:</span> <span class="literal">true</span>  <span class="comment"># 能够自动根据qq号识别账户</span></span><br><span class="line">  <span class="attr">visitor:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">requiredFields:</span> <span class="string">nick,mail</span> <span class="comment"># 评论所需必填项</span></span><br><span class="line">  <span class="attr">master:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="comment">#博主邮箱md5格式（32位小写）</span></span><br><span class="line">  <span class="attr">friends:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="comment"># 小伙伴邮箱md5格式，可添加多个</span></span><br><span class="line">  <span class="attr">tagMeta:</span> <span class="string">&#x27;博主,小伙伴,访客&#x27;</span>  <span class="comment"># 可自己定义</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure><p>此外，还需修改<code>theme/buttefly/layout/includes/third-party/comments/valine.pug</code></p><ol><li><p>首先在下图所示位置添加红色方框中的代码(用于设置必填项)</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/valine%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81.png" alt="valine添加代码"></p></li><li><p>修改以下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">el: &#x27;#vcomment&#x27;,</span><br><span class="line">        appId: &#x27;#&#123;theme.valine.appId&#125;&#x27;,</span><br><span class="line">        appKey: &#x27;#&#123;theme.valine.appKey&#125;&#x27;,</span><br><span class="line">        placeholder: &#x27;#&#123;theme.valine.placeholder&#125;&#x27;,</span><br><span class="line">        avatar: &#x27;#&#123;theme.valine.avatar&#125;&#x27;,</span><br><span class="line">        meta: &#x27;#&#123;theme.valine.guest_info &#125;&#x27;.split(&#x27;,&#x27;),</span><br><span class="line">        pageSize: &#x27;#&#123;theme.valine.pageSize&#125;&#x27;,</span><br><span class="line">        recordIP: #&#123;theme.valine.recordIP&#125;,</span><br><span class="line">        serverURLs: &#x27;#&#123;theme.valine.serverURLs&#125;&#x27;,</span><br><span class="line">        enableQQ: #&#123;theme.valine.enableQQ&#125;,</span><br><span class="line">        // emojiCDN: &#x27;#&#123;theme.valine.emojiCDN&#125;&#x27;,</span><br><span class="line">        emojiMaps: !&#123;emojiMaps&#125;,</span><br><span class="line">        path: window.location.pathname,</span><br><span class="line">        master: &#x27;#&#123;theme.valine.master&#125;&#x27;.split(&#x27;,&#x27;),</span><br><span class="line">        friends: &#x27;#&#123;theme.valine.friends&#125;&#x27;.split(&#x27;,&#x27;),</span><br><span class="line">        tagMeta: &#x27;#&#123;theme.valine.tagMeta || &quot;博主,小伙伴,访客&quot;&#125;&#x27;.split(&#x27;,&#x27;),</span><br><span class="line">        requiredFields: requiredFields,  //设置必填项</span><br><span class="line">        visitor: #&#123;theme.valine.visitor&#125;,</span><br></pre></td></tr></table></figure></li></ol></li><li><p>至此，博客中评论的基础功能已经实现，hexo clean /g/deploy之后可以看到评论区，并且可以正常评论。下面是一些高级设置，包括微信提醒，qq提醒，邮箱提醒等功能。</p></li><li><p>部署：learncloud云引擎—web—部署—配置git <code>https://github.com/heson525/Valine-Admin-Server</code>，点击部署等待完成即可</p></li><li><p>添加环境变量，变量内容及含意见详细教程1</p><ul><li>注意在获取QMSG_KEY时，需要添加选择的机器人好友，否则无法给你发送消息</li></ul></li><li><p>添加完对应的环境变量后，重新部署</p></li><li><p>解决valine定时任务出现流控问题</p><p><a href="https://www.antmoe.com/posts/ff6aef7b/">Valine流控解决方案小康大佬版</a></p><p>自己解决的大致流程(GitHub antion方法)：</p><ol><li><a href="https://github.com/AimTao/leancloud-self-wake">fork此仓库</a></li><li>按照教程设置token</li><li>回到fork的项目中(自己的项目)，依次点击setting—secrets—actions—new repository secret—name必须为SITE，value为valine评论后台地址(环境变量admin-url中的内容)</li><li>测试是否能够触发get请求，在自己的项目中点击star，点击actions，查看是否有记录(actiions可能出现尚未使用的情况，点击I understand …即可，同时可能会提示需要开启enable … workflow)</li></ol><p>注：</p><p>7:00 - 23:59时间段内GitHub action每 29 分钟会唤醒评论后台网站。</p><p>60 天此仓库没有任何更新，Github Action 就会被停止，点击 Action 页面的激活按钮就可以重新启动。</p></li></ol><p>至此，配置完毕。</p><p>twikoo（推荐）</p><p>twikoo的优势以及安装方法啥的我也就不多说了，可以戳<a href="https://twikoo.js.org/">这里</a>查看官方文档，教程很详细，可自行选择腾讯云部署还是免费部署。</p><p>部署成功后，网站评论框下面会有一个齿轮状的图标，此处即为管理后台，点击即可配置相关信息，如隐藏管理后台，博主标识，自定义头像，必填字段，邮箱通知等等，可自行探索，每个配置都有很详细的说明！</p><p>评论框提示信息可以使用emoji表情符号，复制过来直接用</p><p>这里着重说一下<strong>即时通知</strong>的配置：</p><p>目前比较流行的是用server酱来进行消息提醒和传输，但是server酱存在很多限制，比如存在消息上限，消息不能直接看全，需要关注公众号，不能自定义头像等问题。而twikoo中支持用企业微信直接发送评论信息！！！方法有两种，腾讯云部署，调用vercel接口（免费）。</p><p>个人使用的是vercel接口方式，虽然速度不如腾讯云，但好在免费，尤其是对于这种小网站来说，可能根本不会有多少条评论信息，没有必要在这种服务上进行投资。</p><p>步骤：</p><ol><li><p>在企业微信中注册企业，应用管理界面最下方点击创建应用，填写信息及头像</p></li><li><p>在我的企业界面记录企业id，在自己的应用界面查看Agentld和secret，其中secret需要在企业微信app中查看(查看完可卸载)</p></li><li><p>在vercel中新建项目，选择第三方导入</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/vercel%E5%BE%AE%E4%BF%A1%E9%80%9A%E7%9F%A5.png" alt="vercel微信通知"></p></li><li><p>输入<code>https://github.com/zhheo/work-weixin-msg-sever-api</code>，点击确定，然后输入项目名，点击部署即可</p></li><li><p>在此处可查看项目部署的地址，记录此地址</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/vecl%E5%9C%B0%E5%9D%80.png" alt="vecl地址"></p></li><li><p>测试，在浏览器中输入以下连接</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://部署的地址/api?id=企业id&amp;secert=secret值&amp;agentId=agentld值&amp;msg=测试</span><br></pre></td></tr></table></figure></li><li><p>若出现以下界面，则表示部署成功</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/vercel%E6%88%90%E5%8A%9F.png" alt="vercel成功"></p></li><li><p>在twikoo后台管理界面，将URL输入到<code>即时通知</code>—<code>WECOM_API_URL</code>中即可：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://部署的地址/api?id=企业id&amp;secert=secret值&amp;agentId=agentld值&amp;msg=</span><br></pre></td></tr></table></figure></li><li><p>使用个人微信扫描企业微信—微信插件界面的二维码，即可通过个人微信接收评论消息。</p></li></ol><p>gitalk</p><p>主要就是配置简单，页面简洁，可作为附加评论系统使用，缺点就是需要登录github账号进行评论。</p><p>步骤：</p><ol><li><p>注册 OAuth Application</p><p>注册地址戳<a href="https://github.com/settings/applications/new">这里</a></p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/gitalk%E9%85%8D%E7%BD%AE.png" alt="gitalk配置"></p><p>注册完之后可以看到clientId以及clientSecret，记录这两个值</p></li><li><p>新建github仓库</p></li><li><p>修改主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">client_id:</span> <span class="comment"># </span></span><br><span class="line">  <span class="attr">client_secret:</span> <span class="comment">#</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="comment"># 仓库名</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="comment"># github账户名</span></span><br><span class="line">  <span class="attr">admin:</span> <span class="comment"># github账户名</span></span><br><span class="line">  <span class="attr">option:</span></span><br></pre></td></tr></table></figure></li><li><p>重新部署，第一次登录查看效果需要GitHub授权，授权之后会有GitHub发送的第三方应用绑定邮件提醒</p></li></ol><p>在线聊天</p><p>通用设置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Chat Button [recommend]</span></span><br><span class="line"><span class="comment"># It will create a button in the bottom right corner of website, and hide the origin button</span></span><br><span class="line"><span class="attr">chat_btn:</span> <span class="literal">true</span> <span class="comment"># 开启</span></span><br></pre></td></tr></table></figure><p>为了不影响访客的体验，主题有<code>chat_hide_show</code>配置，设置为<code>true</code>后，使用工具提供的按钮时，只有向上滚动才会显示聊天按钮，向下则隐藏。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The origin chat button is displayed when scrolling up, and the button is hidden when scrolling down</span></span><br><span class="line"><span class="attr">chat_hide_show:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>使用gitter</p><p>在<a href="https://gitter.im/">Gitter</a>注册账号</p><p>创建<code>room</code>或者<code>community</code>，复制名称到主题配置文件中：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gitter</span></span><br><span class="line"><span class="comment"># https://gitter.im/</span></span><br><span class="line"><span class="attr">gitter:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">room:</span> <span class="string">xxx/xxxx</span> <span class="comment"># 添加名字</span></span><br></pre></td></tr></table></figure><p>分享功能</p><p>个人用的Sharejs，这里分享一下配置过程</p><p>GitHub说明戳<a href="https://github.com/overtrue/share.js/">这里</a></p><p>在Butterfly中，只需要修改主题配置文件即可</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sharejs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sites:</span> <span class="string">facebook,twitter,wechat,weibo,qq</span>  <span class="comment">#想要显示的内容</span></span><br></pre></td></tr></table></figure><p>facebook和推特纯属鸡肋。。。</p><p>搜索系统</p><p>本地搜索</p><p>github说明戳<a href="https://github.com/wzpan/hexo-generator-search">这里</a></p><ol><li><p>进入到根目录下，执行<code>hexo clean</code></p></li><li><p>安装模块<code>npm install hexo-generator-search --save</code></p></li><li><p>可以在文章抬头中设置<code>indexing: false</code>，此时这篇文章无法被搜索到</p></li><li><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><blockquote><p>注意，<code>hexo g</code>之前一定要先<code>hexo clean</code>，否则可能会出现搜索框在底部的情况</p></blockquote><p>algolia全站搜索</p><p>GitHub说明戳<a href="https://github.com/thom4parisot/hexo-algolia">这里</a></p><p>具体配置步骤参考这篇<a href="https://blog.csdn.net/weixin_39893889/article/details/102909677?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&amp;spm=1001.2101.3001.4242">博文</a></p><p>百度收录</p><p>登录<a href="https://ziyuan.baidu.com/">百度收录入口</a></p><p>提交备案过的域名，域名验证选择CNAME解析，将<code>xxxx.域名</code>解析到<code>ziyuan.baidu.com</code>，注意<code>xxxx</code>应填写到主机记录处！验证成功后，在普通收录界面可以看到token，复制该token</p><p>butterfly集成了推送功能，只需要修改主题配置文件即可</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">site_verification:</span></span><br><span class="line">  <span class="comment"># - name: google-site-verification</span></span><br><span class="line">  <span class="comment">#   content: xxxxxx</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">baidu-site-verification</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">xxxx</span>    <span class="comment"># 百度收录token</span></span><br></pre></td></tr></table></figure><blockquote><p>在百度输入site:域名，看到相关信息即为收录成功，收录需要较长的时间，半个月左右</p></blockquote><p>百度统计</p><p>登录官方网站</p><p>添加网址</p><p>找到百度统计的的代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> _hmt = _hmt || [];</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> hm = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">  hm.<span class="property">src</span> = <span class="string">&quot;https://hm.baidu.com/hm.js?xxxxxxxxxxx&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;script&quot;</span>)[<span class="number">0</span>]; </span><br></pre></td></tr></table></figure><p>复制对应的数字到主题配置文件中：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span>  <span class="comment"># 数字</span></span><br></pre></td></tr></table></figure><p>Latex支持</p><p>MathJax</p><p>KaTex</p><p>后者的效果要优于前者，建议使用后者</p><p>KaTex配置</p><ol><li><p>如果开启了MathJax，请禁用</p></li><li><p>修改主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">katex:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">false</span> <span class="comment"># 设置为true时在每一页都加载katex.js；设置为false时，在文章md抬头加上katex: true才会加载</span></span><br><span class="line">  <span class="attr">hide_scrollbar:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>根目录执行如下命令</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm un hexo-renderer-kramed --save</span><br><span class="line">npm i hexo-renderer-markdown-it --save </span><br><span class="line">npm install @neilsustc/markdown-it-katex --save </span><br></pre></td></tr></table></figure></li><li><p>在hexo站点配置文件中修改</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">plugin:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">&#x27;@neilsustc/markdown-it-katex&#x27;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">strict:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li></ol><p>美化</p><p>主题颜色</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme_color:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">main:</span> <span class="string">&quot;#49B1F5&quot;</span></span><br><span class="line">  <span class="attr">paginator:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">button_hover:</span> <span class="string">&quot;#FF7242&quot;</span></span><br><span class="line">  <span class="attr">text_selection:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">link_color:</span> <span class="string">&quot;#99a9bf&quot;</span></span><br><span class="line">  <span class="attr">meta_color:</span> <span class="string">&quot;#858585&quot;</span></span><br><span class="line">  <span class="attr">hr_color:</span> <span class="string">&quot;#A4D8FA&quot;</span></span><br><span class="line">  <span class="attr">code_foreground:</span> <span class="string">&quot;#F47466&quot;</span></span><br><span class="line">  <span class="attr">code_background:</span> <span class="string">&quot;rgba(27, 31, 35, .05)&quot;</span></span><br><span class="line">  <span class="attr">toc_color:</span> <span class="string">&quot;#00c4b6&quot;</span></span><br><span class="line">  <span class="attr">blockquote_padding_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">blockquote_background_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br><span class="line">  <span class="attr">scrollbar_color:</span> <span class="string">&quot;#49b1f5&quot;</span></span><br></pre></td></tr></table></figure><p>背景</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 图片格式 url(http://xxxxxx.com/xxx.jpg)</span></span><br><span class="line"><span class="comment"># 顏色（HEX值/RGB值/颜色单词/渐变色)</span></span><br><span class="line"><span class="comment"># 空 不显示</span></span><br><span class="line"><span class="attr">background:</span></span><br></pre></td></tr></table></figure><p>footer背景</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footer是否显示背景图片</span></span><br><span class="line"><span class="attr">footer_bg:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>value</th><th>含义</th></tr></thead><tbody><tr><td>false</td><td>默认的颜色</td></tr><tr><td>true</td><td>和top_img相同</td></tr><tr><td>HEX值/RGB值</td><td>对应的颜色</td></tr><tr><td>img链接</td><td>图片</td></tr></tbody></table><p>打字效果</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line"><span class="attr">activate_power_mode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">colorful:</span> <span class="literal">true</span> <span class="comment"># open particle animation (冒光特效)</span></span><br><span class="line">  <span class="attr">shake:</span> <span class="literal">true</span> <span class="comment">#  open shake (抖动特效)</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># 手机上是否开启</span></span><br></pre></td></tr></table></figure><p>背景特效</p><p>静止彩带</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">150</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">click_to_change:</span> <span class="literal">false</span>  <span class="comment"># 每次点击都更换彩带</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手机端是否显示</span></span><br></pre></td></tr></table></figure><p>动态彩带</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_fluttering_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># false 手机端是否显示</span></span><br></pre></td></tr></table></figure><p>鼠标点击效果</p><p>文字</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ClickShowText:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">text:</span>   <span class="comment"># 可自定义文字</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">I</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">LOVE</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">YOU</span></span><br><span class="line">  <span class="attr">fontSize:</span> <span class="string">15px</span></span><br><span class="line">  <span class="attr">random:</span> <span class="literal">false</span> <span class="comment"># 文字随机显示</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="comment"># 手机是否显示</span></span><br></pre></td></tr></table></figure><p>爱心</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">click_heart:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment"># 手机端</span></span><br></pre></td></tr></table></figure><p>鼠标滑动特效</p><p>鼠标在滑动时，会有五彩缤纷的小星星掉落（效果可自行设置查看）</p><ol><li><p>在<code>主题/source/js</code>中新建<code>fairyDustCursor.js</code>，复制以下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> <span class="title function_">fairyDustCursor</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> possibleColors = [<span class="string">&quot;#D61C59&quot;</span>, <span class="string">&quot;#E7D84B&quot;</span>, <span class="string">&quot;#1B8798&quot;</span>]</span><br><span class="line">    <span class="keyword">var</span> width = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">    <span class="keyword">var</span> height = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">    <span class="keyword">var</span> cursor = &#123;<span class="attr">x</span>: width/<span class="number">2</span>, <span class="attr">y</span>: width/<span class="number">2</span>&#125;;</span><br><span class="line">    <span class="keyword">var</span> particles = [];</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">bindEvents</span>();</span><br><span class="line">      <span class="title function_">loop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// Bind events that are needed</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">bindEvents</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, onMouseMove);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchmove&#x27;</span>, onTouchMove);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;touchstart&#x27;</span>, onTouchMove);</span><br><span class="line">  </span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, onWindowResize);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">onWindowResize</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      width = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">      height = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">onTouchMove</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span>( e.<span class="property">touches</span>.<span class="property">length</span> &gt; <span class="number">0</span> ) &#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; e.<span class="property">touches</span>.<span class="property">length</span>; i++ ) &#123;</span><br><span class="line">          <span class="title function_">addParticle</span>( e.<span class="property">touches</span>[i].<span class="property">clientX</span>, e.<span class="property">touches</span>[i].<span class="property">clientY</span>, possibleColors[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*possibleColors.<span class="property">length</span>)]);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">onMouseMove</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      cursor.<span class="property">x</span> = e.<span class="property">clientX</span>;</span><br><span class="line">      cursor.<span class="property">y</span> = e.<span class="property">clientY</span>;</span><br><span class="line">  </span><br><span class="line">      <span class="title function_">addParticle</span>( cursor.<span class="property">x</span>, cursor.<span class="property">y</span>, possibleColors[<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*possibleColors.<span class="property">length</span>)]);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">addParticle</span>(<span class="params">x, y, color</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> particle = <span class="keyword">new</span> <span class="title class_">Particle</span>();</span><br><span class="line">      particle.<span class="title function_">init</span>(x, y, color);</span><br><span class="line">      particles.<span class="title function_">push</span>(particle);</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">updateParticles</span>(<span class="params"></span>) &#123;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>; i &lt; particles.<span class="property">length</span>; i++ ) &#123;</span><br><span class="line">        particles[i].<span class="title function_">update</span>();</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">for</span>( <span class="keyword">var</span> i = particles.<span class="property">length</span> -<span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- ) &#123;</span><br><span class="line">        <span class="keyword">if</span>( particles[i].<span class="property">lifeSpan</span> &lt; <span class="number">0</span> ) &#123;</span><br><span class="line">          particles[i].<span class="title function_">die</span>();</span><br><span class="line">          particles.<span class="title function_">splice</span>(i, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">requestAnimationFrame</span>(loop);</span><br><span class="line">      <span class="title function_">updateParticles</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Particle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  </span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">character</span> = <span class="string">&quot;*&quot;</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lifeSpan</span> = <span class="number">120</span>; <span class="comment">//ms</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">initialStyles</span> =&#123;</span><br><span class="line">        <span class="string">&quot;position&quot;</span>: <span class="string">&quot;fixed&quot;</span>,</span><br><span class="line">        <span class="string">&quot;top&quot;</span>: <span class="string">&quot;0&quot;</span>, <span class="comment">//必须加</span></span><br><span class="line">        <span class="string">&quot;display&quot;</span>: <span class="string">&quot;block&quot;</span>,</span><br><span class="line">        <span class="string">&quot;pointerEvents&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">        <span class="string">&quot;z-index&quot;</span>: <span class="string">&quot;10000000&quot;</span>,</span><br><span class="line">        <span class="string">&quot;fontSize&quot;</span>: <span class="string">&quot;20px&quot;</span>,</span><br><span class="line">        <span class="string">&quot;will-change&quot;</span>: <span class="string">&quot;transform&quot;</span></span><br><span class="line">      &#125;;</span><br><span class="line">  </span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">init</span> = <span class="keyword">function</span>(<span class="params">x, y, color</span>) &#123;</span><br><span class="line">  </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">velocity</span> = &#123;</span><br><span class="line">          <span class="attr">x</span>:  (<span class="title class_">Math</span>.<span class="title function_">random</span>() &lt; <span class="number">0.5</span> ? -<span class="number">1</span> : <span class="number">1</span>) * (<span class="title class_">Math</span>.<span class="title function_">random</span>() / <span class="number">2</span>),</span><br><span class="line">          <span class="attr">y</span>: <span class="number">1</span></span><br><span class="line">        &#125;;</span><br><span class="line">  </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">position</span> = &#123;<span class="attr">x</span>: x - <span class="number">10</span>, <span class="attr">y</span>: y - <span class="number">20</span>&#125;;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">initialStyles</span>.<span class="property">color</span> = color;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(color);</span><br><span class="line">  </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">element</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;span&#x27;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">character</span>;</span><br><span class="line">        <span class="title function_">applyProperties</span>(<span class="variable language_">this</span>.<span class="property">element</span>, <span class="variable language_">this</span>.<span class="property">initialStyles</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">update</span>();</span><br><span class="line">  </span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">element</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">  </span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">update</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">velocity</span>.<span class="property">x</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">velocity</span>.<span class="property">y</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lifeSpan</span>--;</span><br><span class="line">  </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&quot;translate3d(&quot;</span> + <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">x</span> + <span class="string">&quot;px,&quot;</span> + <span class="variable language_">this</span>.<span class="property">position</span>.<span class="property">y</span> + <span class="string">&quot;px,0) scale(&quot;</span> + (<span class="variable language_">this</span>.<span class="property">lifeSpan</span> / <span class="number">120</span>) + <span class="string">&quot;)&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">die</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(<span class="variable language_">this</span>.<span class="property">element</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">applyProperties</span>(<span class="params"> target, properties </span>) &#123;</span><br><span class="line">      <span class="keyword">for</span>( <span class="keyword">var</span> key <span class="keyword">in</span> properties ) &#123;</span><br><span class="line">        target.<span class="property">style</span>[ key ] = properties[ key ];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="title function_">init</span>();</span><br><span class="line">  &#125;)();</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件中引用，搜索<code>inject</code>，在<code>bottom</code>处通过以下方式引用</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line"><span class="attr">head:</span></span><br><span class="line"><span class="attr">bottom:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&lt;script</span> <span class="string">src=&quot;/js/fairyDustCursor.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>主页冒泡特效</p><ol><li><p>在<code>主题/source/js</code>下创建一个<code>xxx.js</code>文件，复制以下内容到文件中：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 气泡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bubble</span>(<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&#x27;#page-header&#x27;</span>).<span class="title function_">circleMagic</span>(&#123;</span><br><span class="line">      <span class="attr">radius</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="attr">density</span>: <span class="number">.2</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&#x27;rgba(255,255,255,.4)&#x27;</span>,</span><br><span class="line">      <span class="attr">clearOffset</span>: <span class="number">0.99</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;! <span class="keyword">function</span>(<span class="params">p</span>) &#123;</span><br><span class="line">  p.<span class="property">fn</span>.<span class="property">circleMagic</span> = <span class="keyword">function</span>(<span class="params">t</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> o, a, n, r, e = !<span class="number">0</span>,</span><br><span class="line">          i = [],</span><br><span class="line">          d = p.<span class="title function_">extend</span>(&#123; <span class="attr">color</span>: <span class="string">&quot;rgba(255,0,0,.5)&quot;</span>, <span class="attr">radius</span>: <span class="number">10</span>, <span class="attr">density</span>: <span class="number">.3</span>, <span class="attr">clearOffset</span>: <span class="number">.2</span> &#125;, t),</span><br><span class="line">          l = <span class="variable language_">this</span>[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>) &#123; e = !(<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> &gt; a) &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">s</span>(<span class="params"></span>) &#123; o = l.<span class="property">clientWidth</span>, a = l.<span class="property">clientHeight</span>, l.<span class="property">height</span> = a + <span class="string">&quot;px&quot;</span>, n.<span class="property">width</span> = o, n.<span class="property">height</span> = a &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">h</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (e)</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">var</span> t <span class="keyword">in</span> r.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, o, a), i) i[t].<span class="title function_">draw</span>();</span><br><span class="line">          <span class="title function_">requestAnimationFrame</span>(h)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">          <span class="keyword">var</span> t = <span class="variable language_">this</span>;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">function</span> <span class="title function_">e</span>(<span class="params"></span>) &#123; t.<span class="property">pos</span>.<span class="property">x</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>() * o, t.<span class="property">pos</span>.<span class="property">y</span> = a + <span class="number">100</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>(), t.<span class="property">alpha</span> = <span class="number">.1</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>() * d.<span class="property">clearOffset</span>, t.<span class="property">scale</span> = <span class="number">.1</span> + <span class="number">.3</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>(), t.<span class="property">speed</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>(), <span class="string">&quot;random&quot;</span> === d.<span class="property">color</span> ? t.<span class="property">color</span> = <span class="string">&quot;rgba(&quot;</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">255</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;, &quot;</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">0</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;, &quot;</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="number">0</span> * <span class="title class_">Math</span>.<span class="title function_">random</span>()) + <span class="string">&quot;, &quot;</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toPrecision</span>(<span class="number">2</span>) + <span class="string">&quot;)&quot;</span> : t.<span class="property">color</span> = d.<span class="property">color</span> &#125;</span><br><span class="line">          t.<span class="property">pos</span> = &#123;&#125;, <span class="title function_">e</span>(), <span class="variable language_">this</span>.<span class="property">draw</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; t.<span class="property">alpha</span> &lt;= <span class="number">0</span> &amp;&amp; <span class="title function_">e</span>(), t.<span class="property">pos</span>.<span class="property">y</span> -= t.<span class="property">speed</span>, t.<span class="property">alpha</span> -= <span class="number">5e-4</span>, r.<span class="title function_">beginPath</span>(), r.<span class="title function_">arc</span>(t.<span class="property">pos</span>.<span class="property">x</span>, t.<span class="property">pos</span>.<span class="property">y</span>, t.<span class="property">scale</span> * d.<span class="property">radius</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, !<span class="number">1</span>), r.<span class="property">fillStyle</span> = t.<span class="property">color</span>, r.<span class="title function_">fill</span>(), r.<span class="title function_">closePath</span>() &#125;</span><br><span class="line">      &#125;! <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">          o = l.<span class="property">offsetWidth</span>, a = l.<span class="property">offsetHeight</span>,</span><br><span class="line">              <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">                  <span class="keyword">var</span> t = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line">                  t.<span class="property">id</span> = <span class="string">&quot;canvas&quot;</span>, t.<span class="property">style</span>.<span class="property">top</span> = <span class="number">0</span>, t.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="number">0</span>, t.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&quot;absolute&quot;</span>, l.<span class="title function_">appendChild</span>(t), t.<span class="property">parentElement</span>.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&quot;hidden&quot;</span></span><br><span class="line">              &#125;(), (n = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>)).<span class="property">width</span> = o, n.<span class="property">height</span> = a, r = n.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>; t &lt; o * d.<span class="property">density</span>; t++) &#123;</span><br><span class="line">              <span class="keyword">var</span> e = <span class="keyword">new</span> f;</span><br><span class="line">              i.<span class="title function_">push</span>(e)</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="title function_">h</span>()</span><br><span class="line">      &#125;(), <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;scroll&quot;</span>, c, !<span class="number">1</span>), <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, s, !<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;(jQuery);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用气泡方法</span></span><br><span class="line"><span class="title function_">bubble</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* xkTool */</span></span><br><span class="line"><span class="keyword">var</span> chocolate = <span class="keyword">new</span> <span class="title function_">xkTool</span>();</span><br><span class="line">chocolate.<span class="title function_">footFish</span>();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>主题配置文件中，引入js文件</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+   - &lt;script src=&quot;/js/chocolate.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>看板娘</p><p>初级看板娘</p><ol><li><p>根目录输入如下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></li><li><p>下载相应的模型，具体模型请自行百度</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install live2d-widget-model-haruto</span><br></pre></td></tr></table></figure></li><li><p>打开站点配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line"><span class="attr">model:</span> </span><br><span class="line"><span class="attr">use:</span> <span class="string">live2d-widget-model-haruto</span> <span class="comment">#模型选择</span></span><br><span class="line"><span class="attr">display:</span> </span><br><span class="line"><span class="attr">position:</span> <span class="string">right</span>  <span class="comment">#模型位置</span></span><br><span class="line"><span class="attr">width:</span> <span class="number">150</span>       <span class="comment">#模型宽度</span></span><br><span class="line"><span class="attr">height:</span> <span class="number">300</span>      <span class="comment">#模型高度</span></span><br><span class="line"><span class="attr">mobile:</span> </span><br><span class="line"><span class="attr">show:</span> <span class="literal">false</span>      <span class="comment">#是否在手机端显示</span></span><br></pre></td></tr></table></figure></li></ol><p>高级看板娘</p><p>可以说话，换装，并且会根据你的操作出发相应的提示信息</p><p>可以在主题配置文件中直接引用大佬Akilar的链接</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    # - &lt;link rel=&quot;stylesheet&quot; href=&quot;/xxx.css&quot;&gt;</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+   # 高级看板娘</span></span><br><span class="line"><span class="addition">+   - &lt;script defer src=&quot;https://cdn.jsdelivr.net/npm/akilar-live2d-widget/autoload.min.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>也可以自行配置</p><ol><li><p><code>themes/butterfly/source/</code>下打开<code>git bash</code>终端，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/stevenjoezhang/live2d-widget.git live2d-widget</span><br></pre></td></tr></table></figure></li><li><p>找到文件<code>\themes\butterfly\source\live2d-widget\autoload.js</code>，修改</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- const live2d_path = &quot;https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/&quot;;</span></span><br><span class="line"><span class="addition">+ const live2d_path = &quot;/live2d-widget/&quot;;</span></span><br></pre></td></tr></table></figure><p>意思就是本地引用</p></li><li><p>主题配置文件中</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> inject:</span><br><span class="line">   head:</span><br><span class="line">   bottom:</span><br><span class="line"><span class="addition">+    - &lt;script defer src=&quot;/live2d-widget/autoload.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>自定义修改</p><p><code>\themes\butterfly\source\live2d-widget</code>路径下</p><ol><li><code>waifu-tips.js</code>：按钮和对话框的逻辑</li><li><code>waifu-tips.json</code> : 定义了触发条件和触发时显示的文字；</li><li><code>waifu.css</code>: 可以对看板娘的位置布局等做自定义修改</li></ol></li></ol><p>页面美化</p><p>改变<code>ol/ul/h1-h5</code>的样式</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">beautify:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">site</span> <span class="comment"># site/post # 生效区域，网站还是文章页</span></span><br><span class="line">  <span class="attr">title-prefix-icon:</span> <span class="string">&#x27;\f0c1&#x27;</span></span><br><span class="line">  <span class="attr">title-prefix-icon-color:</span> <span class="string">&quot;#F47466&quot;</span></span><br></pre></td></tr></table></figure><p>博客标题字体</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Font settings for the site title and site subtitle</span></span><br><span class="line"><span class="attr">blog_title_font:</span></span><br><span class="line">  <span class="attr">font_link:</span> <span class="string">https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap</span></span><br><span class="line">  <span class="attr">font-family:</span> <span class="string">Titillium</span> <span class="string">Web,</span> <span class="string">&#x27;PingFang SC&#x27;</span><span class="string">,</span> <span class="string">&#x27;Hiragino Sans GB&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft JhengHei&#x27;</span><span class="string">,</span> <span class="string">&#x27;Microsoft YaHei&#x27;</span><span class="string">,</span> <span class="string">sans-serif</span></span><br></pre></td></tr></table></figure><p>网站副标题</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">subtitle:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="comment"># Typewriter Effect (打字效果)</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="comment"># loop (循环打字)</span></span><br><span class="line">  <span class="attr">loop:</span> <span class="literal">true</span>  </span><br><span class="line">  <span class="comment"># source 调用第三方服务</span></span><br><span class="line">  <span class="comment"># source: false 关闭</span></span><br><span class="line">  <span class="comment"># source: 1  调用一言汪的一句话 https://hitokoto.cn/</span></span><br><span class="line">  <span class="comment"># source: 2  调用一句網http://yijuzhan.com/</span></span><br><span class="line">  <span class="comment"># source: 3  调用今日诗词 https://www.jinrishici.com/</span></span><br><span class="line">  <span class="comment"># subtitle 会先展示 source , 再展示 sub 的內容</span></span><br><span class="line">  <span class="attr">source:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 如果关闭打字效果，subtitle 只会显示 sub 的第一行文字</span></span><br><span class="line">  <span class="attr">sub:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">123</span><span class="string">&amp;#44;456</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">xxxx</span></span><br></pre></td></tr></table></figure><p>主页<code>top_img</code>显示大小</p><p>默认是全屏，建议使用默认</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_site_info_top:</span> <span class="comment"># 主页标题距离顶部距离  例如 300px/300em/300rem/10%</span></span><br><span class="line"><span class="attr">index_top_img_height:</span>  <span class="comment">#主页top_img高度 例如 300px/300em/300rem  不能使用百分比</span></span><br></pre></td></tr></table></figure><p>页面加载特效</p><p>当加载较慢的时候，会出现加载动画</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">preloader:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>PWA</p><p>……</p><p>字数统计</p><ol><li><p>打开根目录，安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure></li><li><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wordcount:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 文章页面字数统计</span></span><br><span class="line">  <span class="attr">post_wordcount:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">min2read:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 网站全部字数</span></span><br><span class="line">  <span class="attr">total_wordcount:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ol><p>大图查看模式</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fancybox http://fancyapps.com/fancybox/3/</span></span><br><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>弹出提醒</p><p>当复制或有其他命令时，会出现弹窗提醒</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">snackbar:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 位置 top-left / top-center / top-right / bottom-left / bottom-center / bottom-right</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">bottom-left</span></span><br><span class="line">  <span class="attr">bg_light:</span> <span class="string">&#x27;#49b1f5&#x27;</span> <span class="comment">#light mode时弹窗背景</span></span><br><span class="line">  <span class="attr">bg_dark:</span> <span class="string">&#x27;#2d3035&#x27;</span> <span class="comment">#dark mode时弹窗背景</span></span><br></pre></td></tr></table></figure><p>Open Graph</p><p>在 head 里增加一些 meta 资料，例如缩略图、标题、时间等等。当网页被分享到一些平台时，平台会读取 Open Graph 的内容，展示缩略图，标题等等信息。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Open_Graph_meta:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>Instantpage</p><p>当鼠标悬停到链接上超过 65 毫秒时，Instantpage 会对该链接进行预加载，可以提升访问速度。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">instantpage:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>Pangu</p><p>自动在中文和英文、数字、符号间加上空格</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pangu:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 范围</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span> <span class="comment"># site/post</span></span><br></pre></td></tr></table></figure><p>Pjax</p><p>通过ajax更新页面需要变化的部分，然后使用HTML5的pushState修改浏览器的URL地址，不用重复加载相同的资源（css/js）， 从而提升网页的加载速度</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pjax:</span> </span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/music/</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">/no-pjax/</span></span><br></pre></td></tr></table></figure><blockquote><p>一些第三方插件并不支持 pjax ，可以把网页加入到 exclude 里，这个网页会被 pjax 排除在外，点击该网页会重新加载网站</p></blockquote><p>inject</p><p>用于加载自己添加的<code>js/css</code>文件，注意引用格式，上面已经有添加过的例子，此处不做过多解释</p><p>页面底部跳动的红心</p><p>效果：</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E7%BA%A2%E5%BF%83.png" alt="红心"></p><p>步骤：</p><ol><li><p>打开/博客根目录 <code>/themes/Butterfly/layout/includes/footer.pug</code>文件，将以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;theme.since&#125; - $&#123;nowYear&#125; By $&#123;config.author&#125;</span><br></pre></td></tr></table></figure><p>改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;theme.since&#125; - $&#123;nowYear + &#x27; &#x27;&#125; &lt;i id=&quot;heartbeat&quot; class=&quot;fa fas fa-heartbeat&quot;&gt;&lt;/i&gt; $&#123;config.author&#125;</span><br></pre></td></tr></table></figure></li><li><p>将以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;nowYear&#125; By $&#123;config.author&#125; </span><br></pre></td></tr></table></figure><p>修改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;$&#123;nowYear + &#x27; &#x27;&#125; &lt;i id=&quot;heartbeat&quot; class=&quot;fa fas fa-heartbeat&quot;&gt;&lt;/i&gt; $&#123;config.author&#125;</span><br></pre></td></tr></table></figure><p>将以下内容添加到<code>&lt;head&gt;&lt;/head&gt;</code>标签内</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css&quot;&gt;</span><br></pre></td></tr></table></figure><p>具体位置参考：</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E7%BA%A2%E5%BF%83%E4%BB%A3%E7%A0%81%E4%BF%AE%E6%94%B9%E4%BD%8D%E7%BD%AE.png" alt="红心代码修改位置"></p></li></ol><p>添加访客地图</p><ol><li><p>注册<a href="https://clustrmaps.com/">clustrmaps</a>账号</p></li><li><p><code>Free Tools - Website Widget - Get Map Widget</code></p></li><li><p>输入网址，选择样式 <code>Map widget or Globe Widget</code>（可以后期更改）</p></li><li><p>找到如下代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Map widget</span></span><br><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> id=<span class="string">&quot;clustrmaps&quot;</span> src=<span class="string">&quot;**********************&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Globe Widget</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">id</span>=<span class="string">&quot;clstr_globe&quot;</span> <span class="attr">src</span>=<span class="string">&quot;**********************&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>在<code>themes\Butterfly\layout\includes\widget</code>文件夹新建<code>card_map.pug</code>文件，添加以下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//- 对应于Map Widget</span><br><span class="line">.card-widget.card-map</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.fa.fa-globe-asia(aria-hidden=&quot;true&quot;)</span><br><span class="line">      span= _p(&#x27;aside.card_map&#x27;)</span><br><span class="line">    script#clustrmaps(type=&quot;text/javascript&quot; defer=&quot;defer&quot; src=&quot;此处填入你自己的代码&quot;)</span><br><span class="line">    </span><br><span class="line">//- 对应Globe widget</span><br><span class="line">.card-widget.card-map</span><br><span class="line">  .card-content</span><br><span class="line">    .item-headline</span><br><span class="line">      i.fa.fa-globe-asia(aria-hidden=&quot;true&quot;)</span><br><span class="line">      span= _p(&#x27;aside.card_map&#x27;)</span><br><span class="line">    script#clstr_globe(type=&quot;text/javascript&quot; defer=&quot;defer&quot; src=&quot;此处填入你自己的代码&quot;)</span><br></pre></td></tr></table></figure><blockquote><p>区别就在于是<code>clustrmaps</code>还是<code>clstr_globe</code></p></blockquote></li><li><p>还可以自己定义样式，在创建的widget中点击<code>customize</code>，可以设置颜色以及文本，这时候需要使用右侧的<code>src</code></p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E8%AE%BF%E5%AE%A2%E5%9C%B0%E5%9B%BE.png" alt="访客地图"></p></li><li><p>编辑<code>themes\Butterfly\layout\includes\widget\index.pug</code>，在想要显示的位置加入以下代码</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//- page</span><br><span class="line">    !=partial(&#x27;includes/widget/card_author&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">    !=partial(&#x27;includes/widget/card_announcement&#x27;, &#123;&#125;, &#123;cache: true&#125;)</span><br><span class="line">    !=partial(&#x27;includes/widget/card_top_self&#x27;, &#123;&#125;, &#123;cache: true&#125;)      </span><br><span class="line"><span class="addition">+   //- 访客地图card</span></span><br><span class="line"><span class="addition">+   if theme.aside.card_map</span></span><br><span class="line"><span class="addition">+       !=partial(&#x27;includes/widget/card_map&#x27;, &#123;&#125;, &#123;cache:true&#125;)</span></span><br><span class="line"></span><br><span class="line">    .sticky_layout</span><br></pre></td></tr></table></figure></li><li><p>编辑主题配置文件，在<code>card_webinfo</code>下面添加</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">card_map:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>编辑<code>themes\Butterfly\languages\zh-CN.yml</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">categories: 分类</span><br><span class="line">  card_announcement: 公告</span><br><span class="line"><span class="addition">+ card_map: 访客地图</span></span><br><span class="line">  card_categories: 分类</span><br></pre></td></tr></table></figure></li></ol><p>添加Prixiv日榜</p><p>略</p><p>添加日历</p><p>略</p><p>哔哩哔哩番剧页面插件</p><p>略</p><p>地址栏添加abblink</p><ol><li><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abblink</span><br></pre></td></tr></table></figure></li><li><p>站点配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink/</span></span><br></pre></td></tr></table></figure></li><li><p>在文章抬头处添加自定义<code>abbrlink</code>即可，若没有定义，会随机数生成数字</p></li></ol><p>添加网易云音乐（包括音乐界面还有全局吸底Aplayer）</p><p>网易云音乐外链&amp;id</p><p>网易云音乐网页版—选择喜欢的歌曲或者歌单—分享至网易云动态—个人主页点击分享的歌曲或者歌单—点击生成外链</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E7%BD%91%E6%98%93%E4%BA%91%E7%94%9F%E6%88%90%E5%A4%96%E9%93%BE.png" alt="网易云生成外链"></p><p>可以自行选择尺寸</p><p>在外链中可以看到id，后面的一串数字即为所需的内容</p><p>全局吸底</p><ol><li><p>进入博客根目录，执行以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure></li><li><p>在站点配置文件中加入</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayer:</span></span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 注意asset_inject必须设置为false</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Inject the css and script (aplayer/meting)</span></span><br><span class="line"><span class="attr">aplayerInject:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>主题配置文件中<code>inject bottom</code>处插入html</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">  bottom:</span><br><span class="line"><span class="addition">+   # apalyer全局吸底</span></span><br><span class="line"><span class="addition">+   - &lt;div class=&quot;aplayer no-destroy&quot; data-id=&quot;自己的id&quot; data-server=&quot;netease&quot; data-type=&quot;playlist&quot; data-fixed=&quot;true&quot; data-mini=&quot;true&quot; data-listFolded=&quot;false&quot; data-order=&quot;list&quot; data-lrctype=&quot;1&quot; data-preload=&quot;none&quot; data-autoplay=&quot;true&quot; muted&gt;&lt;/div&gt;</span></span><br></pre></td></tr></table></figure><p>主要参数含义如下：</p><table><thead><tr><th>option</th><th>default</th><th>描述</th></tr></thead><tbody><tr><td>data-id</td><td>必须</td><td>歌曲/歌单的id</td></tr><tr><td>data-server</td><td>必须</td><td>音乐平台：netease, tencent, kugou, xiami, baidu</td></tr><tr><td>data-type</td><td>必须</td><td>song, playlist, album, search, artist 单曲就是song，歌单是playlist</td></tr><tr><td>data-fixed</td><td>false</td><td>enable fixed mode</td></tr><tr><td>data-autoplay</td><td>false</td><td>自动播放</td></tr><tr><td>data-mini</td><td>false</td><td>enable mini mode</td></tr><tr><td>data-loop</td><td>all</td><td>循环播放，‘all’,‘one’,‘none’</td></tr><tr><td>data-order</td><td>list</td><td>播放顺序，‘list’，‘random’</td></tr><tr><td>data-listmaxheight</td><td>340px</td><td>列表最大高度</td></tr></tbody></table><blockquote><p>若想切换页面时，音乐不会中断，需要在主题配置文件中开启<code>pjax: true</code></p></blockquote></li></ol>]]></content>
      
      
      <categories>
          
          <category> 🏍️网站搭建及美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 🦋Butterfly </tag>
            
            <tag> 📡vercel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly主题基础配置</title>
      <link href="/posts/2/"/>
      <url>/posts/2/</url>
      
        <content type="html"><![CDATA[<p>基础配置(Butterfly主题4.0.1版本)</p><p>升级建议</p><p>在 hexo 的根目录创建一个文件 _config.butterfly.yml，并把主题目录的 _config.yml 内容复制到 _config.butterfly.yml 中</p><blockquote><p>注意：不要删除原来的主题配置文件</p><p>​   此方法需要hexo版本 &gt; 5.0</p><p>​   以后只需要在_config.butterfly.yml中配置即可</p></blockquote><p>文章默认抬头</p><p>根目录/scafflods/post.md`中可以修改文章默认抬头</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:    # 文章标题</span><br><span class="line">date:# 创建日期</span><br><span class="line">updated: # 更新日期</span><br><span class="line">tags: # 文章标签</span><br><span class="line">categories:# 类别</span><br><span class="line">keywords:# 关键字</span><br><span class="line">description:# 文章描述</span><br><span class="line">top<span class="emphasis">_img:# 顶部图</span></span><br><span class="line"><span class="emphasis">comments:# 显示文章评论模块，默认为true</span></span><br><span class="line"><span class="emphasis">cover:# 文章封面</span></span><br><span class="line"><span class="emphasis">toc:# 显示文章目录，默认为配置文件中toc的enable配置</span></span><br><span class="line"><span class="emphasis">toc_</span>number:# 显示toc<span class="emphasis">_number，默认为配置文件中toc的number配置</span></span><br><span class="line"><span class="emphasis">toc_</span>style<span class="emphasis">_simple:  # toc简介模式</span></span><br><span class="line"><span class="emphasis">copyright: # 显示文章版权模块(默认为设置中post_</span>copyright的enable配置)</span><br><span class="line">copyright<span class="emphasis">_author:# 文章版权模块的作者</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:# 版权模块的文章连接</span><br><span class="line">copyright<span class="emphasis">_info:# 版权模块的文章信息</span></span><br><span class="line"><span class="emphasis">mathjax:# 显示mathjax(当设置mathjax的per_</span>page: false时，才需要配置，默认 false)</span><br><span class="line">katex:# # 显示katex(当设置katex的per<span class="emphasis">_page: false时，才需要配置，默认 false)</span></span><br><span class="line"><span class="emphasis">aplayer:# 在需要的界面加载aplayer</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:# 配置代码框是否展开，默认为配置文件中的highlight<span class="emphasis">_shrink配置</span></span><br><span class="line"><span class="emphasis">aside:# 显示侧边栏，默认为true</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure><p>参考我自己的抬头设置：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">author: 郭新宇</span><br><span class="line">categories:</span><br><span class="line">tags:</span><br><span class="line">katex: </span><br><span class="line">abbrlink:  # 未指定时，会随机生成数字作为链接</span><br><span class="line">description: </span><br><span class="line">cover:</span><br><span class="line">sticky:  # 文章置顶</span><br><span class="line">swiper<span class="emphasis">_index: 1</span></span><br></pre></td></tr></table></figure><p>新建页面</p><ol><li>进入根目录</li><li>git bash中输入<code>hexo new page tags</code></li><li>找到<code>source/tags/index.md</code>文件</li><li>添加<code>type:&quot;tages&quot;</code></li><li>分类页面及其他页面（包括二级页面）的创建方法相同，区别在于<code>type</code>后的名字，如分类页面需要添加<code>type:&quot;categories&quot;</code></li></ol><p>友情链接</p><ol><li><p>页面创建方法略</p></li><li><p><code>hexo根目录/source/_data</code>中新建文件<code>link.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">名字</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">描述</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Weibo</span> <span class="comment"># 链接名</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.weibo.com/</span> <span class="comment"># 链接</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span> <span class="comment"># 图片</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">微博</span> <span class="comment"># 描述</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Twitter</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://twitter.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">推特</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p>404页面</p><p>基础配置</p><p>主题配置文件中，修改如下代码：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">error_404:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&quot;页面丢失&quot;</span></span><br><span class="line"><span class="attr">background:</span>  <span class="comment"># 图片</span></span><br></pre></td></tr></table></figure><p>高级配置</p><p>语言</p><p>站点配置文件<code>_config.yml</code></p><p>默认语言为en，支持三种语言，default，zh-CN简体中文，zh-TW繁体</p><p>网站资料</p><p>修改网站标题，副标题，邮箱，作者等信息，打开站点配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="attr">keywords:</span> [<span class="string">xxx</span>,<span class="string">xxx</span>,<span class="string">xxx</span>,<span class="string">xxx</span>]</span><br><span class="line"><span class="attr">author:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br></pre></td></tr></table></figure><p>导航栏</p><p>主题配置文件中（前提是已经创建这些页面并添加了<code>type</code>）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">时间轴:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">媒体||fas</span> <span class="attr">fa-list:</span></span><br><span class="line">    <span class="string">番剧:</span> <span class="string">/bangumis/</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-youtube</span>   <span class="comment"># 二级导航栏</span></span><br><span class="line">    <span class="string">电影:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-film</span></span><br><span class="line">    <span class="string">书单:</span> <span class="string">/books/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-book</span></span><br><span class="line">    <span class="string">音乐:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="string">清单||fa</span> <span class="attr">fa-heartbeat:</span></span><br><span class="line">    <span class="string">相册:</span> <span class="string">/gallery/</span> <span class="string">||</span> <span class="string">far</span> <span class="string">fa-image</span></span><br><span class="line">    <span class="string">主页:</span> <span class="string">/home/</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-phoenix-framework</span></span><br><span class="line">  <span class="string">留言板:</span> <span class="string">/contact/</span> <span class="string">||</span> <span class="string">far</span> <span class="string">fa-comments</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><blockquote><p>必须严格遵从导航栏格式</p><p>导航栏名称：/<code>type</code>/ || 图标</p></blockquote><p>头像</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/avatar.png</span> <span class="string">or</span> <span class="string">url</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># 头像一直转圈</span></span><br></pre></td></tr></table></figure><p>代码</p><p>主题</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="string">light</span> <span class="comment"># 支持六种，darker，pale night，light，ocean，mac，mac light</span></span><br></pre></td></tr></table></figure><p>六种主题的效果可自行百度，不过个人觉得<code>mac</code>是看起来最舒服的</p><p>代码copy</p><p>主题配置文件中</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span> <span class="comment"># 是否支持代码复制</span></span><br></pre></td></tr></table></figure><p>代码块关闭/展开</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">true</span> <span class="comment"># 代码框</span></span><br></pre></td></tr></table></figure><p>对应三个参数：</p><table><thead><tr><th style="text-align:center">value</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">true</td><td style="text-align:center">不展开，需要点击展开按钮</td></tr><tr><td style="text-align:center">false</td><td style="text-align:center">展开，有展开按钮</td></tr><tr><td style="text-align:center">none</td><td style="text-align:center">不显示展开按钮</td></tr></tbody></table><blockquote><p>也可以在文章抬头中单独设置，如果主题配置文件中为true，可以在抬头中设置false，对应的文章页面则会展开；反之亦然。</p></blockquote><p>代码换行（建议不允许换行）</p><p>默认为不换行，不换行的话，代码区域会出现横向的滚动条</p><p>允许换行，打开主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>还需要关闭站点配置文件中渲染方式<code>higlight</code>和<code>prismjs</code>的line_number（看你使用哪种渲染方式吧）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># 修改</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># 修改</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>代码高度限制</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br></pre></td></tr></table></figure><blockquote><p>单位是px，直接加数字即可，最多限制到30px</p></blockquote><p>社交图标</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/github账户名</span> <span class="string">||</span> <span class="string">Github</span> <span class="comment"># github</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:xxxxxx@gmail.com</span> <span class="string">||</span> <span class="string">Email</span> <span class="comment"># 邮箱</span></span><br><span class="line">  <span class="attr">fab fa-qq:</span> <span class="string">wpa.qq.com/msgrd?v=3&amp;uin=你的qq号&amp;site=qq&amp;menu=yes</span> <span class="comment"># 自动发起会话</span></span><br><span class="line">  <span class="attr">fab fa-qq:</span> <span class="string">tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=qq号&amp;website=www.oicqzone.com</span>  <span class="comment"># 自动添加qq，把qq号改为自己的即可</span></span><br><span class="line">  <span class="attr">fab fa-weixin:</span> <span class="comment"># 可以添加图片链接</span></span><br><span class="line">  <span class="attr">fab fa-weibo:</span> <span class="string">https://weibo.com/你的微博主页id/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo</span>  <span class="comment"># 可直接跳转到你的微博主页</span></span><br><span class="line">  <span class="attr">fab fa-bilibili:</span> <span class="comment"># 链接可以去个人主页寻找</span></span><br></pre></td></tr></table></figure><blockquote><p>格式：图标：rul || 描述</p></blockquote><p>文章主页节选</p><p>支持两种：</p><ul><li>自动节选</li><li>文章页description</li></ul><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">value</th><th style="text-align:center">代表</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">description</td><td style="text-align:center">只显示description</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">both</td><td style="text-align:center">先显示desc，没有的话自动节选</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">auto_excerpt</td><td style="text-align:center">自动节选</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">false</td><td style="text-align:center">不显示文章内容</td></tr></tbody></table><p>desc需要在文章抬头添加<code>descripiton: xxxx</code></p><p>网站顶部图：</p><p>禁止所有的顶部图<code>disable_top_img: true</code></p><p>单项配置</p><table><thead><tr><th style="text-align:left">配置</th><th style="text-align:left">含义</th></tr></thead><tbody><tr><td style="text-align:left">index_img</td><td style="text-align:left">主页</td></tr><tr><td style="text-align:left">default_top_img</td><td style="text-align:left">默认，页面的top_img没有配置时，显示default_top_img</td></tr><tr><td style="text-align:left">archive_img</td><td style="text-align:left">归档页面</td></tr><tr><td style="text-align:left">tag_img</td><td style="text-align:left">标签子页面</td></tr><tr><td style="text-align:left">tag_per_img</td><td style="text-align:left">可配置每个tag的top_img</td></tr><tr><td style="text-align:left">category_img</td><td style="text-align:left">分类子页面</td></tr><tr><td style="text-align:left">category_per_img</td><td style="text-align:left">可配置每个类别的top_img</td></tr></tbody></table><p>其他页面，如自建页面和文章的<code>top_img</code>，需要到对应md页面的抬头中设置</p><blockquote><p>不推荐为每个tag和类别页设置不同的顶部图，会拖慢hexo生成速度</p></blockquote><p>文章置顶</p><p>在文章抬头中添加<code>sticky: 1</code>属性使文章置顶，数值越大，优先级越高</p><p>文章封面</p><p>可以在每个md的抬头中设置<code>cover: url</code>属性来添加封面</p><p>也可以使用默认封面，修改主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span>  <span class="comment"># 是否显示封面</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span> <span class="comment"># 封面的位置 left , right , both，both是交错模式出现</span></span><br><span class="line">  <span class="attr">default_cover:</span>  <span class="comment"># 默认封面</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">url</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">url</span></span><br></pre></td></tr></table></figure><blockquote><p>设置多张默认图片后，若在文章中没有设置<code>cover</code>，会随机选取一张图片作为封面</p></blockquote><p>文章页信息配置</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 主页文章日期是创建日或者更新日或都显示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 相对日期还是准确日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主页是否显示分类</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 主页显示标签</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 显示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章页日期是创建日或者更新日或都显示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false</span></span><br></pre></td></tr></table></figure><p>版权</p><p>主题配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line">  decode: false</span><br><span class="line">  license: CC BY-NC-SA 4.0</span><br><span class="line">  license_url: https://creativecommons.org/licenses/by-nc-sa/4.0/</span><br></pre></td></tr></table></figure><p>如果有文章不需要显示版权，可在文章太有设置 <code>copyright: false</code></p><p>打赏</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">url/路径</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">微信</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">url/路径</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">支付宝</span></span><br></pre></td></tr></table></figure><p>TOC目录</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span>   <span class="comment"># 文章页是否显示</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">false</span> <span class="comment"># 普通页面是否显示</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span> <span class="comment"># 显示章节数</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span> <span class="comment"># 是否展开TOC</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># 简洁模式，只对文章页有效</span></span><br></pre></td></tr></table></figure><p>为特定的文章配置：</p><p>在文章抬头设置<code>toc_number</code>和<code>toc</code></p><p>主题会先判断md抬头是否有配置，如果有，抬头设置为准，没有则以主题配置文件中的配置为准</p><p>相关文章</p><p>原理：根据tags的比例来推荐</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># 顯示推薦文章數目</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated 文章日期显示创建日或者更新日</span></span><br></pre></td></tr></table></figure><p>文章锚点</p><p>开启后，文章链接会根据标题ID进行替换</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># anchor</span></span><br><span class="line"><span class="attr">anchor:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>文章过期提醒</p><p>以更新日期为准</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Displays outdated notice for a post</span></span><br><span class="line"><span class="attr">noticeOutdate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span> <span class="comment"># style: simple/flat</span></span><br><span class="line">  <span class="attr">limit_day:</span> <span class="number">365</span> <span class="comment"># 距离更新多少天显示过期提醒</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span> <span class="comment"># 显示的位置 top/bottom</span></span><br><span class="line">  <span class="attr">message_prev:</span> <span class="string">It</span> <span class="string">has</span> <span class="string">been</span> <span class="comment"># 天数之前的文字</span></span><br><span class="line">  <span class="attr">message_next:</span> <span class="string">days</span> <span class="string">since</span> <span class="string">the</span> <span class="string">last</span> <span class="string">update,</span> <span class="string">the</span> <span class="string">content</span> <span class="string">of</span> <span class="string">the</span> <span class="string">article</span> <span class="string">may</span> <span class="string">be</span> <span class="string">outdated.</span> <span class="comment"># 天数之后的文字</span></span><br></pre></td></tr></table></figure><p>文章分页按钮</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># post_pagination (分頁)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="comment"># 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>开放图片描述</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">photofigcaption:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>复制功能配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 是否开启</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 超过限制后加上版权信息</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span>  <span class="comment"># 字数限制，超过之后，会附带版权信息</span></span><br></pre></td></tr></table></figure><p>网站底部设置</p><p>博客年份</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2018</span>  <span class="comment"># 起始日期</span></span><br></pre></td></tr></table></figure><p>页脚自定义文本</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">welcome</span> <span class="string">to</span> <span class="string">my</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://butterfly.js.org/&quot;&gt;blog&lt;/a&gt;!</span></span><br></pre></td></tr></table></figure><p>也可以加上备案信息</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">&lt;a</span> <span class="string">href=&quot;icp链接&quot;&gt;&lt;img</span> <span class="string">class=&quot;icp-icon&quot;</span> <span class="string">src=&quot;icp图片&quot;&gt;&lt;span&gt;备案号：xxxxxx&lt;/span&gt;&lt;/a&gt;</span></span><br></pre></td></tr></table></figure><p>右下角功能按钮</p><p>繁体简体转换</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">default:</span> <span class="string">简</span>  <span class="comment"># 默认按钮显示文字，网站为简体，应设置为繁</span></span><br><span class="line">  <span class="attr">defaultEncoding:</span> <span class="number">1</span> <span class="comment"># 网站默认语言，1是繁体，2是简体</span></span><br><span class="line">  <span class="attr">translateDelay:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">msgToTraditionalChinese:</span> <span class="string">&quot;繁&quot;</span> <span class="comment"># 当文字是简体时，提示的文字</span></span><br><span class="line">  <span class="attr">msgToSimplifiedChinese:</span> <span class="string">&quot;简&quot;</span> <span class="comment"># 当文本时繁体时，提示的文字</span></span><br></pre></td></tr></table></figure><p>夜间模式</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 开放</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span>  <span class="comment"># 切换按钮</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span>  <span class="comment"># 为true时，早6点到晚6点间为light mode，其他时间为dark</span></span><br></pre></td></tr></table></figure><p>阅读模式</p><p>去掉除文章之外的内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>按钮排序</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改 )</span></span><br><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="comment"># readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">show:</span> <span class="comment"># toc,chat,comment</span></span><br></pre></td></tr></table></figure><p>一般保持默认即可</p><p>侧边栏</p><p>排版</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span>  <span class="comment"># 是否隐藏 </span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span> <span class="comment"># 是否开启可以去掉侧边栏的按钮</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># 手机页面（ 显示宽度 &lt; 768px ）是否显示aside內容</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># 位置 left or right</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">Github</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/jerryc127/hexo-theme-butterfly</span></span><br><span class="line">  <span class="attr">card_announcement:</span> <span class="comment"># 宣言卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">my</span> <span class="string">Blog</span></span><br><span class="line">  <span class="attr">card_recent_post:</span> <span class="comment"># 最近文章卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">  <span class="attr">card_categories:</span> <span class="comment"># 类别标签</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">  <span class="attr">card_tags:</span>  <span class="comment"># 标签卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span> <span class="comment"># 开启之后，tag标签五颜六色</span></span><br><span class="line">  <span class="attr">card_archives:</span> <span class="comment"># 归档卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>访问人数</p><p>内置了busuanzi</p><p>修改主题文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>网站运行时间</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">6</span><span class="string">/7/2018</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br></pre></td></tr></table></figure><p>最新评论</p><p>在侧边栏显示最新评论模块</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Aside widget - Newest Comments</span></span><br><span class="line"><span class="attr">newest_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span>  <span class="comment"># 显示数量限制</span></span><br><span class="line">  <span class="attr">storage:</span> <span class="number">10</span> <span class="comment"># unit: mins, save data to localStorage</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="literal">true</span>   <span class="comment"># 是否显示头像</span></span><br></pre></td></tr></table></figure><blockquote><p>由于 大部分API 有访问次数限制，为了避免调用太多，需要设置存取期限。也就是说，调用后资料会存在 localStorage 里，在存取期限内刷新网站只会去 localStorage 读取资料。 期限一过，刷新页面时才会去调取 API 读取新的数据。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 🏍️网站搭建及美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 🦋Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo + Github/云服务器搭建个人网站</title>
      <link href="/posts/1/"/>
      <url>/posts/1/</url>
      
        <content type="html"><![CDATA[<p>Hexo+GitHub/云服务器搭建个人网站</p><h3 id="一、Hexo-Github">一、Hexo + Github</h3><p>优势：免费方便，不花一分钱，不需要服务器不需要后台，博客可以轻松打包，转移</p><p>劣势：速度受限，不稳定</p><p>个人最开始使用的是Github，但后来购买了新域名，为了域名备案又购买了云服务器，干脆将博客部署到了云服务器上……</p><p>步骤：</p><ol><li><p>准备工作（较为简单，不再过多赘述）</p><ul><li><p>注册Github账号并验证邮箱</p></li><li><p>安装node.js以及git for windows</p><p>node.js去官网下载即可</p><p>git下载速度可能会非常慢，这里给出了我的资源链接，若是需要其他版本的git，请自行寻找。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://pan.baidu.com/s/1s300wkM8oUJV0OqrRmFUlQ</span><br><span class="line">提取码：z5bk</span><br></pre></td></tr></table></figure></li></ul></li><li><p>创建仓库（存储网站上的所有内容）</p><p>在Github上新建一个名为<code>github用户名.github.io</code>的仓库（必须是你的用户名，其它名称无效），将来网站访问地址就是<code>https://github用户名.github.io</code></p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%93.png" alt="创建仓库"></p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E5%88%9B%E5%BB%BAgit%E4%BB%93%E5%BA%932.png" alt="创建git仓库2"></p><p>注意：仓库创建成功后10~30分钟才会生效</p></li><li><p>绑定域名（没有域名的跳过即可）</p><ol><li><p>购买新域名，万网/godaddy，实名认证，看个人需求决定是否备案，备案的话需要购买云服务器或者虚拟主机，最好在域名实名认证后3~5天再进行备案。</p></li><li><p>阿里云配置新域名：</p><ul><li><p>控制台—&gt;域名解析—&gt;添加A记录</p><ul><li><p>记录类型：A记录</p></li><li><p>主机记录：@</p></li><li><p>解析线路：默认</p></li><li><p>记录值：IP地址，打开cmd，运行ping xxx.github.io即可得到</p></li><li><p>注：连接超时解决办法：C:\Windows\System32\drivers\etc\hosts中添加192.30.255.112  <a href="http://github.com">github.com</a> git<br>185.31.16.184 <a href="http://github.global.ssl.fastly.net">github.global.ssl.fastly.net</a></p><p>(需要完美控制权限)</p></li><li><p>TTL：默认十分钟</p></li></ul></li><li><p>控制台—&gt;域名解析—&gt;添加CNAME记录</p><ul><li>记录类型：CNAME</li><li>主机记录：WWW</li><li>解析线路：默认</li><li>记录值：域名 <a href="http://xxxx.github.io">xxxx.github.io</a></li><li>TTL：默认十分钟</li></ul></li></ul></li><li><p>在项目source目录下新建文件CNAME.txt，文件保存域名地址，然后删掉.txt</p></li><li><p>xxx.github.io-&gt;setting-&gt;github pages-&gt;custorm domain-&gt;添加购买的域名</p></li></ol><p>注意：若是想解除绑定，需要删除域名解析，删除CNAME.txt文件，删除github上绑定的域名，重新部署。此外，<strong>还需清除浏览器缓存</strong>，上述缺一不可。</p></li><li><p>配置SSH key（若无特殊指明，以下命令均在 Git Bash中执行）</p><p>ssh key用来连接本地和服务器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/. ssh #检查本机已存在的ssh密钥</span><br></pre></td></tr></table></figure><p>如果提示：No such file or directory 说明你是第一次使用git，输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;git邮箱地址&quot;</span><br></pre></td></tr></table></figure><p>连续三次回车，最终会在在用户目录下的<code>.ssh</code>文件夹中生成一个<code>id_rsa.pub</code>文件，记事本打开并复制，打开github主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key，将复制的内容粘贴到key，title随意发挥，保存。</p></li><li><p>在本地测试SSH是否配置成功</p><p>输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>若提示<code>You've successfully authenticated, but GitHub does not provide shell access</code>则表示连接成功。</p><p>此时还需配置以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;liuxianan&quot;// github用户名</span><br><span class="line">$ git config --global user.email  &quot;xxx@qq.com&quot;// github注册邮箱</span><br></pre></td></tr></table></figure></li><li><p>Hexo</p><p>Hexo是一个博客发布工具，支持Markdown格式，有很多优秀的插件以及主题。</p><ol><li><p>本地新建目录，作为网站内容的根目录，cd进入该目录，安装hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd xxxx</span><br><span class="line">$ npm install -g hexo</span><br></pre></td></tr></table></figure></li><li><p>初始化Hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init  # 有可能会出现错误，这时多尝试几次，实在不行，直接把https://github.com/hexojs/hexo-starter/中的内容下载到目录中</span><br></pre></td></tr></table></figure><p>执行完上述命令后，会在该目录下生成相关文件……</p></li><li><p>执行以下命令，在本地预览</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g //生成</span><br><span class="line">hexo s //本地预览，会生成预览地址</span><br></pre></td></tr></table></figure><p>浏览器输入本地预览地址查看，此时hexo已经自行创建了一篇名为hello world的博文。</p></li><li><p>修改主题</p><p>根据个人喜好来吧，我最开始使用的yilla主题，后面换成了Butterfly主题。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd blog根目录/</span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br></pre></td></tr></table></figure><p>修改根目录下<code>_config.yml</code>中的<code>theme: xxx</code>为<code>theme: butterfly</code>（注意缩进问题）</p><p>如果没有pug以及stylus的渲染器，下载安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>然后重新执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean # 清除，遇事不决直接hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure></li></ol></li><li><p>上传到Github</p><p>还有关键的一步就是配置_config.yml中的deploy部分和URL部分：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line"> type: git</span><br><span class="line"> repository: git@github.com:github用户名/GitHub用户名.github.io.git </span><br><span class="line"> branch: master</span><br><span class="line"> message:</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">url: https://github用户名.github.io/</span><br><span class="line">root:</span><br></pre></td></tr></table></figure><p>运行以下命令推送到github：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy  or</span><br><span class="line">hexo d           //简写</span><br></pre></td></tr></table></figure><p>若是提示以下错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Deployer not found: github 或者 Deployer not found: git</span><br></pre></td></tr></table></figure><p>则需要再安装一个插件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>重新推送即可。</p></li></ol><p>至此，hexo+github配置完毕。</p><h3 id="二、Hexo-云服务器">二、Hexo + 云服务器</h3><p>优势：相较于GitHub，访问速度更快，更稳定</p><p>劣势：需要购买云服务器(首单很便宜，恢复原价之后那叫一个贵)，配置繁琐，服务器到期之后若是想租用其他服务器，需要重新配置</p><p>步骤：</p><ol><li><p>购买大陆境内云服务器(阿里云、腾讯云……，个人购买的是阿里云esc.n4.small，1CPU，2GiB，1Mbps)</p></li><li><p>配置云服务器（均在控制台中进行操作）：</p><ul><li><p>设置实例账户密码，linux服务器默认账户是root，密码自行设置</p></li><li><p>设置VNC远程登录密码</p></li><li><p>在控制台的安全组中找到配置规则，在配置规则选择手动添加80端口，<code>目的</code>处填写80，<code>源</code>对应的位置选择0.0.0.0/0</p><p>注：后面需要使用的nginx Web服务器的默认端口为80，所以需要在服务器上开启80端口，确保可以通过云服务器IP地址访问nginx上的内容</p></li></ul></li><li><p>服务器搭建nginx环境，nginx是一款轻量级的 Web 服务器 / 反向代理服务器及电子邮件代理服务器，国内使用 nginx 网站用户有：百度、京东、新浪等等</p><ol><li><p>安装nginx</p><hr><p><strong>血的教训</strong>：本人最开始使用 yum install -y nginx 命令安装的nginx（图个简单省事），确实安装成功了，但是通过访问服务器公网IP地址后发现：</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE.png" alt="无法访问"></p><p>但当时也没多想，毕竟nginx都安装成功了，nginx -v和nginx -t命令也都没有问题，于是直接进行了后面的步骤……。结果最终部署到云服务器上后出现403错误，按照<a href="https://blog.csdn.net/qq_35843543/article/details/81561240">Nginx出现403 forbidden解决办法</a>一一进行排查，但均以失败告终，无奈只能初始化云盘，从头再来。再次执行上述命令后还是出现了同样的问题，最终决定按照如下方法进行nginx的安装！</p><hr><ol><li><p>远程连接服务器并登录root账户</p></li><li><p>安装PCRE(nginx使用PCRE解析正则表达式)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure></li><li><p>安装zlib库(nginx使用zlib对http的包进行解压)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure></li><li><p>安装GCC以及Open SSL</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc-c++</span><br><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure></li><li><p>新建nginx目录，用于下载以及解压nginx（此步不是必须，只要为了文件的存储更加直观明了）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir nginx</span><br></pre></td></tr></table></figure></li><li><p>进入nginx目录(cd nginx)，下载nginx，<a href="http://nginx.org/en/download.html">官网</a>的版本分为三种，开发版，最新稳定版，遗留的旧版本，<strong>建议下载最新稳定版(Stable version)</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://nginx.org/download/nginx-xxxxx.tar.gz # xxxx对应版本号</span><br></pre></td></tr></table></figure></li><li><p>解压并进入解压目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-xxxxx.tar.gz</span><br><span class="line">cd nginx-xxxxx</span><br></pre></td></tr></table></figure></li><li><p>当前目录下检查nginx的默认配置（234步成功完成后，此步肯定也没有问题，若出现问题，检查一下上述库是否安装成功）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br></pre></td></tr></table></figure></li></ol></li><li><p>编译安装</p><ol><li><p>在解压目录下执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>注：此处可能会出现以下error信息：</p><p><strong>error_one：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src/core/ngx_murmurhash.c:37:11: error: this statement may fall through [-Werror=implicit-fallthrough=]</span><br><span class="line">         h ^= data[2] &lt;&lt; 16;</span><br><span class="line">      ~~^~~~~~~~~~~~~~~~</span><br><span class="line">src/core/ngx_murmurhash.c:38:5: note: here</span><br><span class="line">  case 2:</span><br><span class="line">     ^~~~</span><br><span class="line">src/core/ngx_murmurhash.c:39:11: error: this statement may fall through [-Werror=implicit-fallthrough=]</span><br><span class="line">      h ^= data[1] &lt;&lt; 8;</span><br><span class="line">         ~~^~~~~~~~~~~~~~~</span><br><span class="line">src/core/ngx_murmurhash.c:40:5: note: here</span><br></pre></td></tr></table></figure><p>解决办法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 解压目录/objs/</span><br><span class="line">vim Makefile</span><br></pre></td></tr></table></figure><p>将其中的-Werror去掉，保存退出。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CFLAGS =  -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g</span><br></pre></td></tr></table></figure><p><strong>error_two:</strong></p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/nginx_error_two.png" alt="nginx_error_two"></p><p>解决办法：vim打开src/os/unix/ngx_user.c，将对应的内容注释掉，简单粗暴。然后再重新回到解压目录，执行编译安装。</p><p><strong>若是上述办法不能解决，建议更换nginx版本。</strong></p></li><li><p>查找安装路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis nginx</span><br></pre></td></tr></table></figure><p>一般为/usr/local/nginx</p></li><li><p>进入到/usr/bin/目录下设置快捷方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/nginx/sbin/nginx nginx</span><br></pre></td></tr></table></figure></li><li><p>回到根目录，运行nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure></li><li><p>在电脑上访问服务器的公网ip地址，看到如下界面即为安装成功！</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/nginx%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png" alt="nginx配置成功"></p></li><li><p>在服务器上通过如下命令可以查看nginx<strong>配置文件路径</strong>以及对应的文件语法是否正确</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84.png" alt="nginx配置文件路径"></p><p>查看版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure></li></ol></li><li><p>配置nginx</p><ol><li><p>关闭nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 快速关闭</span><br><span class="line">nginx -s stop</span><br><span class="line"># 有序而完整地关闭</span><br><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure></li><li><p>进入配置文件目录，打开nginx.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd usr/local/nginx/conf    # 安装目录</span><br><span class="line">vi nginx.conf</span><br></pre></td></tr></table></figure></li><li><p>将第一行的 user 改为 root，并取消注释</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/nginx%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B91.png" alt="nginx配置修改1"></p></li><li><p>在http的server中更改root路径，此路径为网站根目录（尽量不要存储在var等关键目录里，本人设置的为/home/xxxblog）。注意server可能有多个，分别对应80,443等端口号，默认为80端口(也就是通过http访问)，在80端口对应的server修改路径即可。</p></li><li><p><code>server_name</code>处填写公网ip地址</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/nginx%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B92.png" alt="nginx配置修改2"></p><p>注意：此处只是针对域名访问以及80端口进行的设置，下面会有针对域名访问，禁用ip访问，443端口(https)配置，ssL证书安装的的详细说明！建议先按照教程配置，以确保可以通过<code>http://IP地址/</code>访问到服务器上的内容！</p></li><li><p>创建对应的网站根目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/home</span><br><span class="line">mkdir xxxblog   # 确保和root中的地址相同</span><br></pre></td></tr></table></figure></li></ol></li></ol></li><li><p>安装Node.js和git</p><ol><li><p>安装Node.js</p><p>Node.js的安装方法有很多，此处给出本人使用的方法：</p><ol><li><p>cd 进入xxx目录，下载</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://nodejs.org/dist/v14.8.0/node-v14.8.0-linux-x64.tar.xz # 14.8.0版本，其他版本可去官网寻找</span><br></pre></td></tr></table></figure></li><li><p>解压</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf  node-v14.8.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure></li><li><p>vim /etc/profile查看环境变量，在末尾添加以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export NODE_HOME=/root/node/node-v14.8.0-linux-x64 #这里填解压之后node的路径</span><br><span class="line">export PATH=$PATH:$NODE_HOME/bin</span><br></pre></td></tr></table></figure></li><li><p>刷新权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>检测是否安装成功，<code>cd /</code>回到主目录，运行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>出现对应版本号即可，若是没有找到该命令，可能是环境变量里的路径有误，注意是绝对路径。</p></li></ol></li><li><p>安装git以及配置仓库</p><ol><li><p>根目录下安装git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure><p>git 安装完应该在<code>/home</code>目录下</p></li><li><p>配置git用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adduser git</span><br></pre></td></tr></table></figure></li><li><p>修改用户权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 740 /etc/sudoers</span><br></pre></td></tr></table></figure></li><li><p>打开sudoers文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sudoers</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/git%E9%85%8D%E7%BD%AE.png" alt="git配置"></p></li><li><p>在上图位置添加命令（注意缩进，保持一致即可）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitALL=(ALL)      ALL</span><br></pre></td></tr></table></figure></li><li><p>修改sudoers权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 400 /etc/sudoers</span><br></pre></td></tr></table></figure></li><li><p>设置git用户的密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd git</span><br></pre></td></tr></table></figure></li><li><p>切换至git用户，创建 ~/.ssh 文件夹和 ~/.ssh/authorized_keys 文件，将本地生成的id_rsa.pub文件中的公钥复制到authorized_keys中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su git</span><br><span class="line">mkdir ~/.ssh</span><br><span class="line">vim ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure></li><li><p>输入以下命令，赋予权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /home/git/.ssh/authorized_keys</span><br><span class="line">chmod 700 /home/git/.ssh</span><br></pre></td></tr></table></figure></li><li><p>本地git中测试是否能免密登录git，桌面右键，点击git bash here</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -v git@云服务器ip</span><br></pre></td></tr></table></figure><p>可能会出现以下错误：</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/git%E6%9C%AC%E5%9C%B0%E9%AA%8C%E8%AF%81%E5%87%BA%E9%94%99.png" alt="git本地验证出错"></p><p>可以看到错误提示行：</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Offending ECDSA key in /c/Users/jonty/.ssh/known_hosts:3</span><br></pre></td></tr></table></figure><p>解决：打开本地的/c/Users/jonty/.ssh/known_hosts文件，将第3行删除即可。</p><p>重新执行命令，提示以下信息时表示连接成功：</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/git%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png" alt="git本地配置成功"></p></li><li><p>返回服务器，切换到root账户，创建git仓库目录，并赋予权限</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">mkdir /home/repo # 目录自己定义</span><br><span class="line">chown -R git:git /home/repo</span><br><span class="line">chmod -R 755 /home/repo</span><br></pre></td></tr></table></figure></li><li><p>注意还要给网站根目录(也就是配置nginx时设置的目录)赋予权限</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git /home/gxyblog  # 网站根目录</span><br><span class="line">chmod -R 755 /home/gxyblog</span><br></pre></td></tr></table></figure></li><li><p>在git仓库目录创建一个空的git仓库</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/repo</span><br><span class="line">git init -bare hexo.git</span><br></pre></td></tr></table></figure></li><li><p>在git仓库目录/hexo.git下的 hooks 文件夹中新建文件 post-update</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /home/repo/hexo.git/hooks/post-update</span><br></pre></td></tr></table></figure></li><li><p>输入以下内容</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --work-tree=/home/gxyblog --git-dir=/home/repo/hexo.git checkout -f  # 第一个目录为网站根目录  第二个目录为git仓库目录</span><br></pre></td></tr></table></figure></li><li><p>修改post-update权限</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hown -R git:git /home/repo/hexo.git/hooks/post-update</span><br><span class="line">chmod +x /home/repo/hexo.git/hooks/post-update</span><br><span class="line">chown -R git:git /home/repo/hexo.git</span><br></pre></td></tr></table></figure></li></ol></li></ol></li><li><p>本地推送部署</p><p>在本地blog根目录下，找到站点配置文件_config.yml，找到deply和url的配置，进行修改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line"> type: git</span><br><span class="line"> repository: git@云服务器的公网IP:/home/repo/hexo.git  # 目录为git仓库的地址</span><br><span class="line"> branch: master</span><br><span class="line"> message:</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># URL</span><br><span class="line">url: http://公网ip地址/</span><br><span class="line">root: </span><br></pre></td></tr></table></figure></li><li><p>通过http://公网ip地址/进行访问，注意，此时https://公网ip地址/不可访问，因为nginx中使用的为80端口，若想使用https可按照如下教程进一步配置。</p></li></ol><p>至此，部署在github和服务器上的步骤已经完成，可以通过切换deploy中的repo和URL中的网址来部署在GitHub或者云服务器上，个人网站既可以通过https://xxxx.github.io访问，也可以通过http://公网ip地址/访问(前提是都已经部署)。等后期可以购买备案域名，在域名解析中直接指向云服务器或者github对应的ip地址即可。</p><hr><p>三、配置域名访问(同时禁止IP访问)，443端口，ssl证书</p><p>最近备案的域名下来了，在这里记录一下个人配置域名访问以及开放443端口的相关信息吧</p><ol><li><p>配置域名访问</p><p>首先说明，如果想通过域名访问ngixn上的内容，需要满足以下条件：</p><ol><li><p>域名解析到服务器</p></li><li><p>服务器绑定域名，阿里云linux服务器绑定域名官方文档戳<a href="https://help.aliyun.com/knowledge_detail/41091.html">这里</a>。</p></li></ol><p>只绑定域名或者域名解析到服务器或者做跳转解析都是无效的！</p><p>但是我再配置过程中发现了一个严重的问题：</p><p>当域名解析到服务器ip地址后就可以直接跳转了，而nginx.conf中的<code>server_name</code>并没有填写对应的域名。。。what the f**k? 那岂不是任何人的域名都可以访问到我ngixn Web服务器上的内容吗。后来咨询了阿里云工程师，再结合我搜集的资料，发现是nginx.conf中没有禁止空主机头的原因。如果 Nginx 没有禁止空主机头，那么任意域名解析指向到服务器IP，都可以访问站点！此外，通过IP访问服务器上内容也是存在一定风险的，所以尽量设置禁止通过IP访问。</p><p>下面说下具体的配置步骤：</p><ol><li><p>禁止空主机头以及禁止IP访问！！！</p><ol><li><p>连接服务器并登录，停止nginx服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure></li><li><p>打开nginx配置文件(nginx -t可以查看文件位置)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure></li><li><p>在80端口对应的sever前加上如下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">listen  80 default_server;</span><br><span class="line">server_name _;   # 禁止IP访问</span><br><span class="line">return 500;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如下图h黄色区域所示：</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/80%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE.png" alt="80端口配置"></p></li><li><p>测试</p><p>此时的<code>server_name</code>可以先保留为服务器ip地址，先测试一下结果是否符合我们的预期。</p><p>直接运行<code>nginx</code>命令，开启nginx服务。确保</p><ol><li>域名解析到服务器ip地址</li><li>server_name为ip，也就是说还未绑定域名</li></ol><p>此时的结果应该是：既不能通过ip访问，也不能通过域名进行访问。如果结果不符合预期，请检查空主机头是否配置正确或者清除浏览器缓存重新加载！</p></li></ol></li><li><p>域名解析</p><p>略</p></li><li><p>服务器绑定域名</p><ol><li><p>停止ngixn服务</p></li><li><p>打开nginx.conf配置文件，在<code>server_name</code>处添加域名，和解析的域名保持相同即可。如果解析的是<code> xxxx.com</code>，那就写<code>xxxx.com</code>，不要写成<code>www.xxxx.com</code>!</p></li><li><p>重新启动ngixn服务</p></li></ol></li><li><p>最终测试</p><ol><li><p>在浏览器中可以通过域名访问！</p></li><li><p>在本地git中可以连接到域名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -v git@域名</span><br></pre></td></tr></table></figure></li></ol></li><li><p>修改本地hexo根目录站点配置文件</p><p>deploy部分既可以设置为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repository: git@服务器ip:/home/repo/hexo.git</span><br></pre></td></tr></table></figure><p>也可以设置为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repository: git@域名:/home/repo/hexo.git</span><br></pre></td></tr></table></figure><p>url部分由原来的<code>http://ip/</code>修改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://域名/</span><br></pre></td></tr></table></figure></li></ol></li><li><p>开启https</p><p>当我们在浏览器中输入绑定的域名<code>xxxx.com</code>进行访问时，网址默认格式为<code>http://xxxx.com</code>，同时浏览器会提示网址不安全！而https是一种通过计算机网络进行安全通信的传输协议，经由http进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。所以开启https是非常有必要的！</p><ol><li><p>添加443端口</p><p>在服务器实例—安全组—配置规则—中添加443端口</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/443%E5%BC%80%E6%94%BE.png" alt="443开放"></p></li><li><p>购买下载SSL证书</p><p>阿里云每年可以免费申请20个证书，购买之后，点击申请证书，按照要求填写相关信息，等待生成即可</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/%E8%AF%81%E4%B9%A6%E9%85%8D%E7%BD%AE.png" alt="证书配置"></p><p>生成之后点击下载，选择nginx版本。</p></li><li><p>nginx.conf配置</p><p>登录服务器，执行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nginx -s quit # 停止服务</span><br><span class="line">cd /usr/local/nginx</span><br><span class="line">mkdir cert</span><br></pre></td></tr></table></figure><p>通过远程连接工具将下载到本地的ssl证书传送到cert目录下</p><p>打开nginx.conf文件，在443端口处配置以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl; # 如果您使用Nginx 1.15.0及以上版本，请使用listen 443 ssl代替listen 443和ssl on</span><br><span class="line">    server_name 绑定的域名; </span><br><span class="line">    ssl_certificate cert/cert-file-name.pem;  # 需要将cert-file-name.pem替换成已上传的证书文件的名称</span><br><span class="line">    ssl_certificate_key cert/cert-file-name.key; # 需要将cert-file-name.key替换成已上传的证书私钥文件的名称</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root html;  #站点目录。</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>同时还要添加禁止空主机头，在上述代码前加上如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen 443 ssl;</span><br><span class="line">server_name _;</span><br><span class="line">ssl_certificate 随便设置一个ssl证书;</span><br><span class="line">ssl_certificate_key 随便设置一个ssl证书的key;</span><br><span class="line">return 500;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置<code>http</code>请求自动跳转<code>https</code>，如果希望所有的<code>http</code>访问自动跳转到<code>https</code>页面，则可以在需要跳转的<code>http</code>站点下添加以下<code>rewrite</code>语句。（紫色方框区域）</p><p><img src="https://cdn.jsdelivr.net/gh/guoxinyu1998/blogimg1/blogbuild/80%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE.png" alt="80端口配置"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rewrite ^(.*)$ https://$host$1; #将所有HTTP请求通过rewrite指令重定向到HTTPS。</span><br></pre></td></tr></table></figure><p>注意，如果把80端口注释掉，只保留443端口的话，在访问网站时，只能输入<code>https://xxxx.com/</code>进行访问，无法直接输入<code>xxxx.com</code>访问，因为会自动跳转到<code>http://xxxx.com</code>，而该端口是被禁止的！</p></li><li><p>重新启动nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin  #进入Nginx服务的可执行目录</span><br><span class="line">./nginx -s reload  #重新载入配置文件</span><br></pre></td></tr></table></figure><p>可能会出现的错误以及解决办法：</p><ol><li><pre><code>nginx: [emerg] the &quot;ssl&quot; parameter requires ngx_http_ssl_module in /...<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   缺少ngx_http_ssl_module模块。解决办法：戳[这里](https://www.cnblogs.com/ghjbk/p/6744131.html)，亲测有效</span><br><span class="line"></span><br><span class="line">2. ```</span><br><span class="line">   nginx: [emerg] cannot load certificate “/ssl/w“error:2006D080:BIO routines:BIO_new_file:no such file</span><br></pre></td></tr></table></figure>ssl文件相对路径错误。解决办法：查看`ssl_certificate`和`ssl_certificate_key`对应的ssl文件路径是否正确！</code></pre></li><li><pre><code>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">端口被占用，解决办法：</span><br><span class="line"></span><br></pre></td></tr></table></figure># 方法一fuser -k 80/tcp  # 若是443端口出现问题，命令中的80换成443即可# 方法二ps -A | grep nginx   # 查看占用的进程号kill -9 pid1    # 杀死进程kill -9 pid2    # 杀死进程<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">5. 配置站点文件中的url</span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre></li></ol><p><a href="https://xn--eqrt2g/">https://域名/</a></p><pre><code></code></pre></li></ol><p>至此，已经全部配置完毕！在浏览器中输入域名，会自动跳转到<code>https://xxxx.com</code>，并且浏览器中不会出现安全提示信息！</p></li></ol><p>My Blog （在不同电脑上转移）</p><ol><li><p><a href="https://blog.csdn.net/m0_37450089/article/details/120939158">安装git</a>，node.js</p></li><li><p>在git中配置SSH key：解决本地和服务器连接的问题</p><ol><li>$ cd ~/. ssh #检查本机已存在的ssh密钥</li><li>ssh-keygen -t rsa -C “邮件地址”</li><li>连续三次回车，找到C:/user/.ssh/id_ras.pub文件，复制内容到GitHub主页-个人设置-SSH and GPG keys - New SSH key（内容粘贴到key中，title随便填写）</li><li>测试是否成功：ssh -T  <a href="mailto:git@github.com">git@github.com</a></li><li>成功后需要配置：<ul><li>git config --global <a href="http://user.name">user.name</a> “xxxx” // github用户名</li><li>git config --global user.email  “<a href="mailto:xxx@qq.com">xxx@qq.com</a>” // github注册邮箱</li></ul></li></ol></li><li><p>在git中通过 npm install -g hexo命令安装hexo</p></li><li><p>在blog目录(转移的)里运行git bash</p></li><li><p>命令</p><ul><li>hexo c 清除</li><li>hexo g  生成</li><li>hexo s  本地预览</li><li>hexo deploy 推送远端</li></ul></li><li><p>hexo+github创建个人博客</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 🏍️网站搭建及美化 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 🛰️Hexo </tag>
            
            <tag> 🎉Github </tag>
            
            <tag> 💥云服务器 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
