<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Butterfly主题高级配置</title>
      <link href="/posts/3/"/>
      <url>/posts/3/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Butterfly主题配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
            <tag> vercel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly主题基础配置</title>
      <link href="/posts/2/"/>
      <url>/posts/2/</url>
      
        <content type="html"><![CDATA[<p>基础配置(Butterfly主题4.0.1版本)</p><p>升级建议</p><p>在 hexo 的根目录创建一个文件 _config.butterfly.yml，并把主题目录的 _config.yml 内容复制到 _config.butterfly.yml 中</p><blockquote><p>注意：不要删除原来的主题配置文件</p><p>​   此方法需要hexo版本 &gt; 5.0</p><p>​   以后只需要在_config.butterfly.yml中配置即可</p></blockquote><p>文章默认抬头</p><p>根目录/scafflods/post.md`中可以修改文章默认抬头</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title:    # 文章标题</span><br><span class="line">date:# 创建日期</span><br><span class="line">updated: # 更新日期</span><br><span class="line">tags: # 文章标签</span><br><span class="line">categories:# 类别</span><br><span class="line">keywords:# 关键字</span><br><span class="line">description:# 文章描述</span><br><span class="line">top<span class="emphasis">_img:# 顶部图</span></span><br><span class="line"><span class="emphasis">comments:# 显示文章评论模块，默认为true</span></span><br><span class="line"><span class="emphasis">cover:# 文章封面</span></span><br><span class="line"><span class="emphasis">toc:# 显示文章目录，默认为配置文件中toc的enable配置</span></span><br><span class="line"><span class="emphasis">toc_</span>number:# 显示toc<span class="emphasis">_number，默认为配置文件中toc的number配置</span></span><br><span class="line"><span class="emphasis">toc_</span>style<span class="emphasis">_simple:  # toc简介模式</span></span><br><span class="line"><span class="emphasis">copyright: # 显示文章版权模块(默认为设置中post_</span>copyright的enable配置)</span><br><span class="line">copyright<span class="emphasis">_author:# 文章版权模块的作者</span></span><br><span class="line"><span class="emphasis">copyright_</span>author<span class="emphasis">_href:</span></span><br><span class="line"><span class="emphasis">copyright_</span>url:# 版权模块的文章连接</span><br><span class="line">copyright<span class="emphasis">_info:# 版权模块的文章信息</span></span><br><span class="line"><span class="emphasis">mathjax:# 显示mathjax(当设置mathjax的per_</span>page: false时，才需要配置，默认 false)</span><br><span class="line">katex:# # 显示katex(当设置katex的per<span class="emphasis">_page: false时，才需要配置，默认 false)</span></span><br><span class="line"><span class="emphasis">aplayer:# 在需要的界面加载aplayer</span></span><br><span class="line"><span class="emphasis">highlight_</span>shrink:# 配置代码框是否展开，默认为配置文件中的highlight<span class="emphasis">_shrink配置</span></span><br><span class="line"><span class="emphasis">aside:# 显示侧边栏，默认为true</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure><p>参考我自己的抬头设置：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">author: 郭新宇</span><br><span class="line">categories:</span><br><span class="line">tags:</span><br><span class="line">katex: </span><br><span class="line">abbrlink:  # 未指定时，会随机生成数字作为链接</span><br><span class="line">description: </span><br><span class="line">cover:</span><br><span class="line">sticky:  # 文章置顶</span><br><span class="line">swiper<span class="emphasis">_index: 1</span></span><br></pre></td></tr></table></figure><p>新建页面</p><ol><li>进入根目录</li><li>git bash中输入<code>hexo new page tags</code></li><li>找到<code>source/tags/index.md</code>文件</li><li>添加<code>type:&quot;tages&quot;</code></li><li>分类页面及其他页面（包括二级页面）的创建方法相同，区别在于<code>type</code>后的名字，如分类页面需要添加<code>type:&quot;categories&quot;</code></li></ol><p>友情链接</p><ol><li><p>页面创建方法略</p></li><li><p><code>hexo根目录/source/_data</code>中新建文件<code>link.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">class_name:</span> <span class="string">名字</span></span><br><span class="line">  <span class="attr">class_desc:</span> <span class="string">描述</span></span><br><span class="line">  <span class="attr">link_list:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Weibo</span> <span class="comment"># 链接名</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://www.weibo.com/</span> <span class="comment"># 链接</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png</span> <span class="comment"># 图片</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">微博</span> <span class="comment"># 描述</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Twitter</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://twitter.com/</span></span><br><span class="line">      <span class="attr">avatar:</span> <span class="string">https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png</span></span><br><span class="line">      <span class="attr">descr:</span> <span class="string">推特</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol><p>404页面</p><p>基础配置</p><p>主题配置文件中，修改如下代码：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">error_404:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&quot;页面丢失&quot;</span></span><br><span class="line"><span class="attr">background:</span>  <span class="comment"># 图片</span></span><br></pre></td></tr></table></figure><p>高级配置</p><p>语言</p><p>站点配置文件<code>_config.yml</code></p><p>默认语言为en，支持三种语言，default，zh-CN简体中文，zh-TW繁体</p><p>网站资料</p><p>修改网站标题，副标题，邮箱，作者等信息，打开站点配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line"><span class="attr">keywords:</span> [<span class="string">xxx</span>,<span class="string">xxx</span>,<span class="string">xxx</span>,<span class="string">xxx</span>]</span><br><span class="line"><span class="attr">author:</span> <span class="string">xxx</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;Asia/Shanghai&#x27;</span></span><br></pre></td></tr></table></figure><p>导航栏</p><p>主题配置文件中（前提是已经创建这些页面并添加了<code>type</code>）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">首页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">时间轴:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="string">标签:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="string">分类:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-folder-open</span></span><br><span class="line">  <span class="string">媒体||fas</span> <span class="attr">fa-list:</span></span><br><span class="line">    <span class="string">番剧:</span> <span class="string">/bangumis/</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-youtube</span>   <span class="comment"># 二级导航栏</span></span><br><span class="line">    <span class="string">电影:</span> <span class="string">/movies/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-film</span></span><br><span class="line">    <span class="string">书单:</span> <span class="string">/books/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-book</span></span><br><span class="line">    <span class="string">音乐:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-music</span></span><br><span class="line">  <span class="string">清单||fa</span> <span class="attr">fa-heartbeat:</span></span><br><span class="line">    <span class="string">相册:</span> <span class="string">/gallery/</span> <span class="string">||</span> <span class="string">far</span> <span class="string">fa-image</span></span><br><span class="line">    <span class="string">主页:</span> <span class="string">/home/</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-phoenix-framework</span></span><br><span class="line">  <span class="string">留言板:</span> <span class="string">/contact/</span> <span class="string">||</span> <span class="string">far</span> <span class="string">fa-comments</span></span><br><span class="line">  <span class="string">友链:</span> <span class="string">/link/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-link</span></span><br><span class="line">  <span class="string">关于:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-heart</span></span><br></pre></td></tr></table></figure><blockquote><p>必须严格遵从导航栏格式</p><p>导航栏名称：/<code>type</code>/ || 图标</p></blockquote><p>头像</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">img:</span> <span class="string">/img/avatar.png</span> <span class="string">or</span> <span class="string">url</span></span><br><span class="line">  <span class="attr">effect:</span> <span class="literal">true</span> <span class="comment"># 头像一直转圈</span></span><br></pre></td></tr></table></figure><p>代码</p><p>主题</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_theme:</span> <span class="string">light</span> <span class="comment"># 支持六种，darker，pale night，light，ocean，mac，mac light</span></span><br></pre></td></tr></table></figure><p>六种主题的效果可自行百度，不过个人觉得<code>mac</code>是看起来最舒服的</p><p>代码copy</p><p>主题配置文件中</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_copy:</span> <span class="literal">true</span> <span class="comment"># 是否支持代码复制</span></span><br></pre></td></tr></table></figure><p>代码块关闭/展开</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_shrink:</span> <span class="literal">true</span> <span class="comment"># 代码框</span></span><br></pre></td></tr></table></figure><p>对应三个参数：</p><table><thead><tr><th style="text-align:center">value</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">true</td><td style="text-align:center">不展开，需要点击展开按钮</td></tr><tr><td style="text-align:center">false</td><td style="text-align:center">展开，有展开按钮</td></tr><tr><td style="text-align:center">none</td><td style="text-align:center">不显示展开按钮</td></tr></tbody></table><blockquote><p>也可以在文章抬头中单独设置，如果主题配置文件中为true，可以在抬头中设置false，对应的文章页面则会展开；反之亦然。</p></blockquote><p>代码换行（建议不允许换行）</p><p>默认为不换行，不换行的话，代码区域会出现横向的滚动条</p><p>允许换行，打开主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">code_word_wrap:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>还需要关闭站点配置文件中渲染方式<code>higlight</code>和<code>prismjs</code>的line_number（看你使用哪种渲染方式吧）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># 修改</span></span><br><span class="line">  <span class="attr">auto_detect:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tab_replace:</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">prismjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">preprocess:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line_number:</span> <span class="literal">false</span> <span class="comment"># 修改</span></span><br><span class="line">  <span class="attr">tab_replace:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><p>代码高度限制</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight_height_limit:</span> <span class="literal">false</span> <span class="comment"># unit: px</span></span><br></pre></td></tr></table></figure><blockquote><p>单位是px，直接加数字即可，最多限制到30px</p></blockquote><p>社交图标</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fab fa-github:</span> <span class="string">https://github.com/github账户名</span> <span class="string">||</span> <span class="string">Github</span> <span class="comment"># github</span></span><br><span class="line">  <span class="attr">fas fa-envelope:</span> <span class="string">mailto:xxxxxx@gmail.com</span> <span class="string">||</span> <span class="string">Email</span> <span class="comment"># 邮箱</span></span><br><span class="line">  <span class="attr">fab fa-qq:</span> <span class="string">wpa.qq.com/msgrd?v=3&amp;uin=你的qq号&amp;site=qq&amp;menu=yes</span> <span class="comment"># 自动发起会话</span></span><br><span class="line">  <span class="attr">fab fa-qq:</span> <span class="string">tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=qq号&amp;website=www.oicqzone.com</span>  <span class="comment"># 自动添加qq，把qq号改为自己的即可</span></span><br><span class="line">  <span class="attr">fab fa-weixin:</span> <span class="comment"># 可以添加图片链接</span></span><br><span class="line">  <span class="attr">fab fa-weibo:</span> <span class="string">https://weibo.com/你的微博主页id/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo</span>  <span class="comment"># 可直接跳转到你的微博主页</span></span><br><span class="line">  <span class="attr">fab fa-bilibili:</span> <span class="comment"># 链接可以去个人主页寻找</span></span><br></pre></td></tr></table></figure><blockquote><p>格式：图标：rul || 描述</p></blockquote><p>文章主页节选</p><p>支持两种：</p><ul><li>自动节选</li><li>文章页description</li></ul><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">index_post_content:</span></span><br><span class="line">  <span class="attr">method:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">500</span> <span class="comment"># if you set method to 2 or 3, the length need to config</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">value</th><th style="text-align:center">代表</th><th style="text-align:center">含义</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">description</td><td style="text-align:center">只显示description</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">both</td><td style="text-align:center">先显示desc，没有的话自动节选</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">auto_excerpt</td><td style="text-align:center">自动节选</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">false</td><td style="text-align:center">不显示文章内容</td></tr></tbody></table><p>desc需要在文章抬头添加<code>descripiton: xxxx</code></p><p>网站顶部图：</p><p>禁止所有的顶部图<code>disable_top_img: true</code></p><p>单项配置</p><table><thead><tr><th style="text-align:left">配置</th><th style="text-align:left">含义</th></tr></thead><tbody><tr><td style="text-align:left">index_img</td><td style="text-align:left">主页</td></tr><tr><td style="text-align:left">default_top_img</td><td style="text-align:left">默认，页面的top_img没有配置时，显示default_top_img</td></tr><tr><td style="text-align:left">archive_img</td><td style="text-align:left">归档页面</td></tr><tr><td style="text-align:left">tag_img</td><td style="text-align:left">标签子页面</td></tr><tr><td style="text-align:left">tag_per_img</td><td style="text-align:left">可配置每个tag的top_img</td></tr><tr><td style="text-align:left">category_img</td><td style="text-align:left">分类子页面</td></tr><tr><td style="text-align:left">category_per_img</td><td style="text-align:left">可配置每个类别的top_img</td></tr></tbody></table><p>其他页面，如自建页面和文章的<code>top_img</code>，需要到对应md页面的抬头中设置</p><blockquote><p>不推荐为每个tag和类别页设置不同的顶部图，会拖慢hexo生成速度</p></blockquote><p>文章置顶</p><p>在文章抬头中添加<code>sticky: 1</code>属性使文章置顶，数值越大，优先级越高</p><p>文章封面</p><p>可以在每个md的抬头中设置<code>cover: url</code>属性来添加封面</p><p>也可以使用默认封面，修改主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cover:</span></span><br><span class="line">  <span class="attr">index_enable:</span> <span class="literal">true</span>  <span class="comment"># 是否显示封面</span></span><br><span class="line">  <span class="attr">aside_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">archives_enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">both</span> <span class="comment"># 封面的位置 left , right , both，both是交错模式出现</span></span><br><span class="line">  <span class="attr">default_cover:</span>  <span class="comment"># 默认封面</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">url</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">url</span></span><br></pre></td></tr></table></figure><blockquote><p>设置多张默认图片后，若在文章中没有设置<code>cover</code>，会随机选取一张图片作为封面</p></blockquote><p>文章页信息配置</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">page:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 主页文章日期是创建日或者更新日或都显示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative 相对日期还是准确日期</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false 主页是否显示分类</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false 主页显示标签</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false 显示描述性文字</span></span><br><span class="line">  <span class="attr">post:</span></span><br><span class="line">    <span class="attr">date_type:</span> <span class="string">both</span> <span class="comment"># created or updated or both 文章页日期是创建日或者更新日或都显示</span></span><br><span class="line">    <span class="attr">date_format:</span> <span class="string">relative</span> <span class="comment"># date/relative</span></span><br><span class="line">    <span class="attr">categories:</span> <span class="literal">true</span> <span class="comment"># true or false</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="literal">true</span> <span class="comment"># true or false</span></span><br><span class="line">    <span class="attr">label:</span> <span class="literal">true</span> <span class="comment"># true or false</span></span><br></pre></td></tr></table></figure><p>版权</p><p>主题配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line">  decode: false</span><br><span class="line">  license: CC BY-NC-SA 4.0</span><br><span class="line">  license_url: https://creativecommons.org/licenses/by-nc-sa/4.0/</span><br></pre></td></tr></table></figure><p>如果有文章不需要显示版权，可在文章太有设置 <code>copyright: false</code></p><p>打赏</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">QR_code:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">url/路径</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">微信</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">img:</span> <span class="string">url/路径</span></span><br><span class="line">      <span class="attr">link:</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">支付宝</span></span><br></pre></td></tr></table></figure><p>TOC目录</p><p>主题配置文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span>   <span class="comment"># 文章页是否显示</span></span><br><span class="line">  <span class="attr">page:</span> <span class="literal">false</span> <span class="comment"># 普通页面是否显示</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">true</span> <span class="comment"># 显示章节数</span></span><br><span class="line">  <span class="attr">expand:</span> <span class="literal">false</span> <span class="comment"># 是否展开TOC</span></span><br><span class="line">  <span class="attr">style_simple:</span> <span class="literal">false</span> <span class="comment"># 简洁模式，只对文章页有效</span></span><br></pre></td></tr></table></figure><p>为特定的文章配置：</p><p>在文章抬头设置<code>toc_number</code>和<code>toc</code></p><p>主题会先判断md抬头是否有配置，如果有，抬头设置为准，没有则以主题配置文件中的配置为准</p><p>相关文章</p><p>原理：根据tags的比例来推荐</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">related_post:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span> <span class="comment"># 顯示推薦文章數目</span></span><br><span class="line">  <span class="attr">date_type:</span> <span class="string">created</span> <span class="comment"># or created or updated 文章日期显示创建日或者更新日</span></span><br></pre></td></tr></table></figure><p>文章锚点</p><p>开启后，文章链接会根据标题ID进行替换</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># anchor</span></span><br><span class="line"><span class="attr">anchor:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>文章过期提醒</p><p>以更新日期为准</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Displays outdated notice for a post</span></span><br><span class="line"><span class="attr">noticeOutdate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">flat</span> <span class="comment"># style: simple/flat</span></span><br><span class="line">  <span class="attr">limit_day:</span> <span class="number">365</span> <span class="comment"># 距离更新多少天显示过期提醒</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">top</span> <span class="comment"># 显示的位置 top/bottom</span></span><br><span class="line">  <span class="attr">message_prev:</span> <span class="string">It</span> <span class="string">has</span> <span class="string">been</span> <span class="comment"># 天数之前的文字</span></span><br><span class="line">  <span class="attr">message_next:</span> <span class="string">days</span> <span class="string">since</span> <span class="string">the</span> <span class="string">last</span> <span class="string">update,</span> <span class="string">the</span> <span class="string">content</span> <span class="string">of</span> <span class="string">the</span> <span class="string">article</span> <span class="string">may</span> <span class="string">be</span> <span class="string">outdated.</span> <span class="comment"># 天数之后的文字</span></span><br></pre></td></tr></table></figure><p>文章分页按钮</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># post_pagination (分頁)</span></span><br><span class="line"><span class="comment"># value: 1 || 2 || false</span></span><br><span class="line"><span class="comment"># 1: The &#x27;next post&#x27; will link to old post</span></span><br><span class="line"><span class="comment"># 2: The &#x27;next post&#x27; will link to new post</span></span><br><span class="line"><span class="comment"># false: disable pagination</span></span><br><span class="line"><span class="attr">post_pagination:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>开放图片描述</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">photofigcaption:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>复制功能配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">copy:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 是否开启</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 超过限制后加上版权信息</span></span><br><span class="line">    <span class="attr">limit_count:</span> <span class="number">50</span>  <span class="comment"># 字数限制，超过之后，会附带版权信息</span></span><br></pre></td></tr></table></figure><p>网站底部设置</p><p>博客年份</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">since:</span> <span class="number">2018</span>  <span class="comment"># 起始日期</span></span><br></pre></td></tr></table></figure><p>页脚自定义文本</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">welcome</span> <span class="string">to</span> <span class="string">my</span> <span class="string">&lt;a</span> <span class="string">href=&quot;https://butterfly.js.org/&quot;&gt;blog&lt;/a&gt;!</span></span><br></pre></td></tr></table></figure><p>也可以加上备案信息</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_text:</span> <span class="string">&lt;a</span> <span class="string">href=&quot;icp链接&quot;&gt;&lt;img</span> <span class="string">class=&quot;icp-icon&quot;</span> <span class="string">src=&quot;icp图片&quot;&gt;&lt;span&gt;备案号：xxxxxx&lt;/span&gt;&lt;/a&gt;</span></span><br></pre></td></tr></table></figure><p>右下角功能按钮</p><p>繁体简体转换</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">translate:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">default:</span> <span class="string">简</span>  <span class="comment"># 默认按钮显示文字，网站为简体，应设置为繁</span></span><br><span class="line">  <span class="attr">defaultEncoding:</span> <span class="number">1</span> <span class="comment"># 网站默认语言，1是繁体，2是简体</span></span><br><span class="line">  <span class="attr">translateDelay:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">msgToTraditionalChinese:</span> <span class="string">&quot;繁&quot;</span> <span class="comment"># 当文字是简体时，提示的文字</span></span><br><span class="line">  <span class="attr">msgToSimplifiedChinese:</span> <span class="string">&quot;简&quot;</span> <span class="comment"># 当文本时繁体时，提示的文字</span></span><br></pre></td></tr></table></figure><p>夜间模式</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">darkmode:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 开放</span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span>  <span class="comment"># 切换按钮</span></span><br><span class="line">  <span class="attr">autoChangeMode:</span> <span class="literal">false</span>  <span class="comment"># 为true时，早6点到晚6点间为light mode，其他时间为dark</span></span><br></pre></td></tr></table></figure><p>阅读模式</p><p>去掉除文章之外的内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">readmode:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>按钮排序</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Don&#x27;t modify the following settings unless you know how they work (非必要不要修改 )</span></span><br><span class="line"><span class="comment"># Choose: readmode,translate,darkmode,hideAside,toc,chat,comment</span></span><br><span class="line"><span class="comment"># Don&#x27;t repeat</span></span><br><span class="line"><span class="attr">rightside_item_order:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="comment"># readmode,translate,darkmode,hideAside</span></span><br><span class="line">  <span class="attr">show:</span> <span class="comment"># toc,chat,comment</span></span><br></pre></td></tr></table></figure><p>一般保持默认即可</p><p>侧边栏</p><p>排版</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aside:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hide:</span> <span class="literal">false</span>  <span class="comment"># 是否隐藏 </span></span><br><span class="line">  <span class="attr">button:</span> <span class="literal">true</span> <span class="comment"># 是否开启可以去掉侧边栏的按钮</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">true</span> <span class="comment"># 手机页面（ 显示宽度 &lt; 768px ）是否显示aside內容</span></span><br><span class="line">  <span class="attr">position:</span> <span class="string">right</span> <span class="comment"># 位置 left or right</span></span><br><span class="line">  <span class="attr">card_author:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">description:</span></span><br><span class="line">    <span class="attr">button:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">      <span class="attr">text:</span> <span class="string">Github</span></span><br><span class="line">      <span class="attr">link:</span> <span class="string">https://github.com/jerryc127/hexo-theme-butterfly</span></span><br><span class="line">  <span class="attr">card_announcement:</span> <span class="comment"># 宣言卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">This</span> <span class="string">is</span> <span class="string">my</span> <span class="string">Blog</span></span><br><span class="line">  <span class="attr">card_recent_post:</span> <span class="comment"># 最近文章卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">5</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">sort:</span> <span class="string">date</span> <span class="comment"># date or updated</span></span><br><span class="line">  <span class="attr">card_categories:</span> <span class="comment"># 类别标签</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">expand:</span> <span class="string">none</span> <span class="comment"># none/true/false</span></span><br><span class="line">  <span class="attr">card_tags:</span>  <span class="comment"># 标签卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">40</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">    <span class="attr">color:</span> <span class="literal">false</span> <span class="comment"># 开启之后，tag标签五颜六色</span></span><br><span class="line">  <span class="attr">card_archives:</span> <span class="comment"># 归档卡片</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">monthly</span> <span class="comment"># yearly or monthly</span></span><br><span class="line">    <span class="attr">format:</span> <span class="string">MMMM</span> <span class="string">YYYY</span> <span class="comment"># eg: YYYY年MM月</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span> <span class="comment"># Sort of order. 1, asc for ascending; -1, desc for descending</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">8</span> <span class="comment"># if set 0 will show all</span></span><br><span class="line">  <span class="attr">card_webinfo:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">post_count:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">last_push_date:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>访问人数</p><p>内置了busuanzi</p><p>修改主题文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">true</span> </span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>网站运行时间</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">runtimeshow:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">publish_date:</span> <span class="number">6</span><span class="string">/7/2018</span> <span class="number">00</span><span class="string">:00:00</span>  </span><br></pre></td></tr></table></figure><p>最新评论</p><p>在侧边栏显示最新评论模块</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Aside widget - Newest Comments</span></span><br><span class="line"><span class="attr">newest_comments:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">sort_order:</span> <span class="comment"># Don&#x27;t modify the setting unless you know how it works</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">6</span>  <span class="comment"># 显示数量限制</span></span><br><span class="line">  <span class="attr">storage:</span> <span class="number">10</span> <span class="comment"># unit: mins, save data to localStorage</span></span><br><span class="line">  <span class="attr">avatar:</span> <span class="literal">true</span>   <span class="comment"># 是否显示头像</span></span><br></pre></td></tr></table></figure><blockquote><p>由于 大部分API 有访问次数限制，为了避免调用太多，需要设置存取期限。也就是说，调用后资料会存在 localStorage 里，在存取期限内刷新网站只会去 localStorage 读取资料。 期限一过，刷新页面时才会去调取 API 读取新的数据。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Butterfly主题配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo + Github/云服务器搭建个人网站</title>
      <link href="/posts/1/"/>
      <url>/posts/1/</url>
      
        <content type="html"><![CDATA[<p>Hexo+GitHub/云服务器搭建个人网站</p><h3 id="一、Hexo-Github">一、Hexo + Github</h3><p>优势：免费方便，不花一分钱，不需要服务器不需要后台，博客可以轻松打包，转移</p><p>劣势：速度受限，不稳定</p><p>个人最开始使用的是Github，但后来购买了新域名，为了域名备案又购买了云服务器，干脆将博客部署到了云服务器上……</p><p>步骤：</p><ol><li><p>准备工作（较为简单，不再过多赘述）</p><ul><li><p>注册Github账号并验证邮箱</p></li><li><p>安装node.js以及git for windows</p><p>node.js去官网下载即可</p><p>git下载速度可能会非常慢，这里给出了我的资源链接，若是需要其他版本的git，请自行寻找。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://pan.baidu.com/s/1s300wkM8oUJV0OqrRmFUlQ</span><br><span class="line">提取码：z5bk</span><br></pre></td></tr></table></figure></li></ul></li><li><p>创建仓库（存储网站上的所有内容）</p><p>在Github上新建一个名为<code>github用户名.github.io</code>的仓库（必须是你的用户名，其它名称无效），将来网站访问地址就是<code>https://github用户名.github.io</code></p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/%E5%88%9B%E5%BB%BA%E4%BB%93%E5%BA%93.png" alt="创建仓库"></p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/%E5%88%9B%E5%BB%BAgit%E4%BB%93%E5%BA%932.png" alt="创建git仓库2"></p><p>注意：仓库创建成功后10~30分钟才会生效</p></li><li><p>绑定域名（没有域名的跳过即可）</p><ol><li><p>购买新域名，万网/godaddy，实名认证，看个人需求决定是否备案，备案的话需要购买云服务器或者虚拟主机，最好在域名实名认证后3~5天再进行备案。</p></li><li><p>阿里云配置新域名：</p><ul><li><p>控制台—&gt;域名解析—&gt;添加A记录</p><ul><li><p>记录类型：A记录</p></li><li><p>主机记录：@</p></li><li><p>解析线路：默认</p></li><li><p>记录值：IP地址，打开cmd，运行ping xxx.github.io即可得到</p></li><li><p>注：连接超时解决办法：C:\Windows\System32\drivers\etc\hosts中添加192.30.255.112  <a href="http://github.com">github.com</a> git<br>185.31.16.184 <a href="http://github.global.ssl.fastly.net">github.global.ssl.fastly.net</a></p><p>(需要完美控制权限)</p></li><li><p>TTL：默认十分钟</p></li></ul></li><li><p>控制台—&gt;域名解析—&gt;添加CNAME记录</p><ul><li>记录类型：CNAME</li><li>主机记录：WWW</li><li>解析线路：默认</li><li>记录值：域名 <a href="http://xxxx.github.io">xxxx.github.io</a></li><li>TTL：默认十分钟</li></ul></li></ul></li><li><p>在项目source目录下新建文件CNAME.txt，文件保存域名地址，然后删掉.txt</p></li><li><p>xxx.github.io-&gt;setting-&gt;github pages-&gt;custorm domain-&gt;添加购买的域名</p></li></ol><p>注意：若是想解除绑定，需要删除域名解析，删除CNAME.txt文件，删除github上绑定的域名，重新部署。此外，<strong>还需清除浏览器缓存</strong>，上述缺一不可。</p></li><li><p>配置SSH key（若无特殊指明，以下命令均在 Git Bash中执行）</p><p>ssh key用来连接本地和服务器</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cd ~/. ssh #检查本机已存在的ssh密钥</span><br></pre></td></tr></table></figure><p>如果提示：No such file or directory 说明你是第一次使用git，输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;git邮箱地址&quot;</span><br></pre></td></tr></table></figure><p>连续三次回车，最终会在在用户目录下的<code>.ssh</code>文件夹中生成一个<code>id_rsa.pub</code>文件，记事本打开并复制，打开github主页，进入个人设置 -&gt; SSH and GPG keys -&gt; New SSH key，将复制的内容粘贴到key，title随意发挥，保存。</p></li><li><p>在本地测试SSH是否配置成功</p><p>输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>若提示<code>You've successfully authenticated, but GitHub does not provide shell access</code>则表示连接成功。</p><p>此时还需配置以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name &quot;liuxianan&quot;// github用户名</span><br><span class="line">$ git config --global user.email  &quot;xxx@qq.com&quot;// github注册邮箱</span><br></pre></td></tr></table></figure></li><li><p>Hexo</p><p>Hexo是一个博客发布工具，支持Markdown格式，有很多优秀的插件以及主题。</p><ol><li><p>本地新建目录，作为网站内容的根目录，cd进入该目录，安装hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd xxxx</span><br><span class="line">$ npm install -g hexo</span><br></pre></td></tr></table></figure></li><li><p>初始化Hexo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init  # 有可能会出现错误，这时多尝试几次，实在不行，直接把https://github.com/hexojs/hexo-starter/中的内容下载到目录中</span><br></pre></td></tr></table></figure><p>执行完上述命令后，会在该目录下生成相关文件……</p></li><li><p>执行以下命令，在本地预览</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g //生成</span><br><span class="line">hexo s //本地预览，会生成预览地址</span><br></pre></td></tr></table></figure><p>浏览器输入本地预览地址查看，此时hexo已经自行创建了一篇名为hello world的博文。</p></li><li><p>修改主题</p><p>根据个人喜好来吧，我最开始使用的yilla主题，后面换成了Butterfly主题。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd blog根目录/</span><br><span class="line">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/Butterfly</span><br></pre></td></tr></table></figure><p>修改根目录下<code>_config.yml</code>中的<code>theme: xxx</code>为<code>theme: butterfly</code>（注意缩进问题）</p><p>如果没有pug以及stylus的渲染器，下载安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><p>然后重新执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean # 清除，遇事不决直接hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure></li></ol></li><li><p>上传到Github</p><p>还有关键的一步就是配置_config.yml中的deploy部分和URL部分：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line"> type: git</span><br><span class="line"> repository: git@github.com:github用户名/GitHub用户名.github.io.git </span><br><span class="line"> branch: master</span><br><span class="line"> message:</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">url: https://github用户名.github.io/</span><br><span class="line">root:</span><br></pre></td></tr></table></figure><p>运行以下命令推送到github：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy  or</span><br><span class="line">hexo d           //简写</span><br></pre></td></tr></table></figure><p>若是提示以下错误：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Deployer not found: github 或者 Deployer not found: git</span><br></pre></td></tr></table></figure><p>则需要再安装一个插件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>重新推送即可。</p></li></ol><p>至此，hexo+github配置完毕。</p><h3 id="二、Hexo-云服务器">二、Hexo + 云服务器</h3><p>优势：相较于GitHub，访问速度更快，更稳定</p><p>劣势：需要购买云服务器(首单很便宜，恢复原价之后那叫一个贵)，配置繁琐，服务器到期之后若是想租用其他服务器，需要重新配置</p><p>步骤：</p><ol><li><p>购买大陆境内云服务器(阿里云、腾讯云……，个人购买的是阿里云esc.n4.small，1CPU，2GiB，1Mbps)</p></li><li><p>配置云服务器（均在控制台中进行操作）：</p><ul><li><p>设置实例账户密码，linux服务器默认账户是root，密码自行设置</p></li><li><p>设置VNC远程登录密码</p></li><li><p>在控制台的安全组中找到配置规则，在配置规则选择手动添加80端口，<code>目的</code>处填写80，<code>源</code>对应的位置选择0.0.0.0/0</p><p>注：后面需要使用的nginx Web服务器的默认端口为80，所以需要在服务器上开启80端口，确保可以通过云服务器IP地址访问nginx上的内容</p></li></ul></li><li><p>服务器搭建nginx环境，nginx是一款轻量级的 Web 服务器 / 反向代理服务器及电子邮件代理服务器，国内使用 nginx 网站用户有：百度、京东、新浪等等</p><ol><li><p>安装nginx</p><hr><p><strong>血的教训</strong>：本人最开始使用 yum install -y nginx 命令安装的nginx（图个简单省事），确实安装成功了，但是通过访问服务器公网IP地址后发现：</p><p>![4QNP@C4POIV<code>&#125;0_BOGSXTRR](https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/4QNP@C4POIV</code>}0_BOGSXTRR.png)</p><p>但当时也没多想，毕竟nginx都安装成功了，nginx -v和nginx -t命令也都没有问题，于是直接进行了后面的步骤……。结果最终部署到云服务器上后出现403错误，按照<a href="https://blog.csdn.net/qq_35843543/article/details/81561240">Nginx出现403 forbidden解决办法</a>一一进行排查，但均以失败告终，无奈只能初始化云盘，从头再来。再次执行上述命令后还是出现了同样的问题，最终决定按照如下方法进行nginx的安装！</p><hr><ol><li><p>远程连接服务器并登录root账户</p></li><li><p>安装PCRE(nginx使用PCRE解析正则表达式)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y pcre pcre-devel</span><br></pre></td></tr></table></figure></li><li><p>安装zlib库(nginx使用zlib对http的包进行解压)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y zlib zlib-devel</span><br></pre></td></tr></table></figure></li><li><p>安装GCC以及Open SSL</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc-c++</span><br><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure></li><li><p>新建nginx目录，用于下载以及解压nginx（此步不是必须，只要为了文件的存储更加直观明了）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir nginx</span><br></pre></td></tr></table></figure></li><li><p>进入nginx目录(cd nginx)，下载nginx，<a href="http://nginx.org/en/download.html">官网</a>的版本分为三种，开发版，最新稳定版，遗留的旧版本，<strong>建议下载最新稳定版(Stable version)</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://nginx.org/download/nginx-xxxxx.tar.gz # xxxx对应版本号</span><br></pre></td></tr></table></figure></li><li><p>解压并进入解压目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-xxxxx.tar.gz</span><br><span class="line">cd nginx-xxxxx</span><br></pre></td></tr></table></figure></li><li><p>当前目录下检查nginx的默认配置（234步成功完成后，此步肯定也没有问题，若出现问题，检查一下上述库是否安装成功）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br></pre></td></tr></table></figure></li></ol></li><li><p>编译安装</p><ol><li><p>在解压目录下执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p>注：此处可能会出现以下error信息：</p><p><strong>error_one：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src/core/ngx_murmurhash.c:37:11: error: this statement may fall through [-Werror=implicit-fallthrough=]</span><br><span class="line">         h ^= data[2] &lt;&lt; 16;</span><br><span class="line">      ~~^~~~~~~~~~~~~~~~</span><br><span class="line">src/core/ngx_murmurhash.c:38:5: note: here</span><br><span class="line">  case 2:</span><br><span class="line">     ^~~~</span><br><span class="line">src/core/ngx_murmurhash.c:39:11: error: this statement may fall through [-Werror=implicit-fallthrough=]</span><br><span class="line">      h ^= data[1] &lt;&lt; 8;</span><br><span class="line">         ~~^~~~~~~~~~~~~~~</span><br><span class="line">src/core/ngx_murmurhash.c:40:5: note: here</span><br></pre></td></tr></table></figure><p>解决办法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd 解压目录/objs/</span><br><span class="line">vim Makefile</span><br></pre></td></tr></table></figure><p>将其中的-Werror去掉，保存退出。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CFLAGS =  -pipe  -O -W -Wall -Wpointer-arith -Wno-unused-parameter -Werror -g</span><br></pre></td></tr></table></figure><p><strong>error_two:</strong></p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/nginx_error_two.png" alt="nginx_error_two"></p><p>解决办法：vim打开src/os/unix/ngx_user.c，将对应的内容注释掉，简单粗暴。然后再重新回到解压目录，执行编译安装。</p><p><strong>若是上述办法不能解决，建议更换nginx版本。</strong></p></li><li><p>查找安装路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whereis nginx</span><br></pre></td></tr></table></figure><p>一般为/usr/local/nginx</p></li><li><p>进入到/usr/bin/目录下设置快捷方式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/nginx/sbin/nginx nginx</span><br></pre></td></tr></table></figure></li><li><p>回到根目录，运行nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure></li><li><p>在电脑上访问服务器的公网ip地址，看到如下界面即为安装成功！</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/nginx%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png" alt="nginx配置成功"></p></li><li><p>在服务器上通过如下命令可以查看nginx<strong>配置文件路径</strong>以及对应的文件语法是否正确</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84.png" alt="nginx配置文件路径"></p><p>查看版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure></li></ol></li><li><p>配置nginx</p><ol><li><p>关闭nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 快速关闭</span><br><span class="line">nginx -s stop</span><br><span class="line"># 有序而完整地关闭</span><br><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure></li><li><p>进入配置文件目录，打开nginx.conf</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd usr/local/nginx/conf    # 安装目录</span><br><span class="line">vi nginx.conf</span><br></pre></td></tr></table></figure></li><li><p>将第一行的 user 改为 root，并取消注释</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/nginx%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B91.png" alt="nginx配置修改1"></p></li><li><p>在http的server中更改root路径，此路径为网站根目录（尽量不要存储在var等关键目录里，本人设置的为/home/xxxblog）。注意server可能有多个，分别对应80,443等端口号，默认为80端口(也就是通过http访问)，在80端口对应的server修改路径即可。</p></li><li><p><code>server_name</code>处填写公网ip地址</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/nginx%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B92.png" alt="nginx配置修改2"></p><p>注意：此处只是针对域名访问以及80端口进行的设置，下面会有针对域名访问，禁用ip访问，443端口(https)配置，ssL证书安装的的详细说明！建议先按照教程配置，以确保可以通过<code>http://IP地址/</code>访问到服务器上的内容！</p></li><li><p>创建对应的网站根目录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/home</span><br><span class="line">mkdir xxxblog   # 确保和root中的地址相同</span><br></pre></td></tr></table></figure></li></ol></li></ol></li><li><p>安装Node.js和git</p><ol><li><p>安装Node.js</p><p>Node.js的安装方法有很多，此处给出本人使用的方法：</p><ol><li><p>cd 进入xxx目录，下载</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://nodejs.org/dist/v14.8.0/node-v14.8.0-linux-x64.tar.xz # 14.8.0版本，其他版本可去官网寻找</span><br></pre></td></tr></table></figure></li><li><p>解压</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf  node-v14.8.0-linux-x64.tar.xz</span><br></pre></td></tr></table></figure></li><li><p>vim /etc/profile查看环境变量，在末尾添加以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export NODE_HOME=/root/node/node-v14.8.0-linux-x64 #这里填解压之后node的路径</span><br><span class="line">export PATH=$PATH:$NODE_HOME/bin</span><br></pre></td></tr></table></figure></li><li><p>刷新权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure></li><li><p>检测是否安装成功，<code>cd /</code>回到主目录，运行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>出现对应版本号即可，若是没有找到该命令，可能是环境变量里的路径有误，注意是绝对路径。</p></li></ol></li><li><p>安装git以及配置仓库</p><ol><li><p>根目录下安装git</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install git</span><br></pre></td></tr></table></figure><p>git 安装完应该在<code>/home</code>目录下</p></li><li><p>配置git用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adduser git</span><br></pre></td></tr></table></figure></li><li><p>修改用户权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 740 /etc/sudoers</span><br></pre></td></tr></table></figure></li><li><p>打开sudoers文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sudoers</span><br></pre></td></tr></table></figure><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/git%E9%85%8D%E7%BD%AE.png" alt="git配置"></p></li><li><p>在上图位置添加命令（注意缩进，保持一致即可）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitALL=(ALL)      ALL</span><br></pre></td></tr></table></figure></li><li><p>修改sudoers权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 400 /etc/sudoers</span><br></pre></td></tr></table></figure></li><li><p>设置git用户的密码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd git</span><br></pre></td></tr></table></figure></li><li><p>切换至git用户，创建 ~/.ssh 文件夹和 ~/.ssh/authorized_keys 文件，将本地生成的id_rsa.pub文件中的公钥复制到authorized_keys中</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">su git</span><br><span class="line">mkdir ~/.ssh</span><br><span class="line">vim ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure></li><li><p>输入以下命令，赋予权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /home/git/.ssh/authorized_keys</span><br><span class="line">chmod 700 /home/git/.ssh</span><br></pre></td></tr></table></figure></li><li><p>本地git中测试是否能免密登录git，桌面右键，点击git bash here</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -v git@云服务器ip</span><br></pre></td></tr></table></figure><p>可能会出现以下错误：</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/git%E6%9C%AC%E5%9C%B0%E9%AA%8C%E8%AF%81%E5%87%BA%E9%94%99.png" alt="git本地验证出错"></p><p>可以看到错误提示行：</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Offending ECDSA key in /c/Users/jonty/.ssh/known_hosts:3</span><br></pre></td></tr></table></figure><p>解决：打开本地的/c/Users/jonty/.ssh/known_hosts文件，将第3行删除即可。</p><p>重新执行命令，提示以下信息时表示连接成功：</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/git%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F.png" alt="git本地配置成功"></p></li><li><p>返回服务器，切换到root账户，创建git仓库目录，并赋予权限</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su root</span><br><span class="line">mkdir /home/repo # 目录自己定义</span><br><span class="line">chown -R git:git /home/repo</span><br><span class="line">chmod -R 755 /home/repo</span><br></pre></td></tr></table></figure></li><li><p>注意还要给网站根目录(也就是配置nginx时设置的目录)赋予权限</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown -R git:git /home/gxyblog  # 网站根目录</span><br><span class="line">chmod -R 755 /home/gxyblog</span><br></pre></td></tr></table></figure></li><li><p>在git仓库目录创建一个空的git仓库</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /home/repo</span><br><span class="line">git init -bare hexo.git</span><br></pre></td></tr></table></figure></li><li><p>在git仓库目录/hexo.git下的 hooks 文件夹中新建文件 post-update</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /home/repo/hexo.git/hooks/post-update</span><br></pre></td></tr></table></figure></li><li><p>输入以下内容</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git --work-tree=/home/gxyblog --git-dir=/home/repo/hexo.git checkout -f  # 第一个目录为网站根目录  第二个目录为git仓库目录</span><br></pre></td></tr></table></figure></li><li><p>修改post-update权限</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hown -R git:git /home/repo/hexo.git/hooks/post-update</span><br><span class="line">chmod +x /home/repo/hexo.git/hooks/post-update</span><br><span class="line">chown -R git:git /home/repo/hexo.git</span><br></pre></td></tr></table></figure></li></ol></li></ol></li><li><p>本地推送部署</p><p>在本地blog根目录下，找到站点配置文件_config.yml，找到deply和url的配置，进行修改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line"> type: git</span><br><span class="line"> repository: git@云服务器的公网IP:/home/repo/hexo.git  # 目录为git仓库的地址</span><br><span class="line"> branch: master</span><br><span class="line"> message:</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># URL</span><br><span class="line">url: http://公网ip地址/</span><br><span class="line">root: </span><br></pre></td></tr></table></figure></li><li><p>通过http://公网ip地址/进行访问，注意，此时https://公网ip地址/不可访问，因为nginx中使用的为80端口，若想使用https可按照如下教程进一步配置。</p></li></ol><p>至此，部署在github和服务器上的步骤已经完成，可以通过切换deploy中的repo和URL中的网址来部署在GitHub或者云服务器上，个人网站既可以通过https://xxxx.github.io访问，也可以通过http://公网ip地址/访问(前提是都已经部署)。等后期可以购买备案域名，在域名解析中直接指向云服务器或者github对应的ip地址即可。</p><hr><p>三、配置域名访问(同时禁止IP访问)，443端口，ssl证书</p><p>最近备案的域名下来了，在这里记录一下个人配置域名访问以及开放443端口的相关信息吧</p><ol><li><p>配置域名访问</p><p>首先说明，如果想通过域名访问ngixn上的内容，需要满足以下条件：</p><ol><li><p>域名解析到服务器</p></li><li><p>服务器绑定域名，阿里云linux服务器绑定域名官方文档戳<a href="https://help.aliyun.com/knowledge_detail/41091.html">这里</a>。</p></li></ol><p>只绑定域名或者域名解析到服务器或者做跳转解析都是无效的！</p><p>但是我再配置过程中发现了一个严重的问题：</p><p>当域名解析到服务器ip地址后就可以直接跳转了，而nginx.conf中的<code>server_name</code>并没有填写对应的域名。。。what the f**k? 那岂不是任何人的域名都可以访问到我ngixn Web服务器上的内容吗。后来咨询了阿里云工程师，再结合我搜集的资料，发现是nginx.conf中没有禁止空主机头的原因。如果 Nginx 没有禁止空主机头，那么任意域名解析指向到服务器IP，都可以访问站点！此外，通过IP访问服务器上内容也是存在一定风险的，所以尽量设置禁止通过IP访问。</p><p>下面说下具体的配置步骤：</p><ol><li><p>禁止空主机头以及禁止IP访问！！！</p><ol><li><p>连接服务器并登录，停止nginx服务</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s quit</span><br></pre></td></tr></table></figure></li><li><p>打开nginx配置文件(nginx -t可以查看文件位置)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure></li><li><p>在80端口对应的sever前加上如下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">listen  80 default_server;</span><br><span class="line">server_name _;   # 禁止IP访问</span><br><span class="line">return 500;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如下图h黄色区域所示：</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/80%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE.png" alt="80端口配置"></p></li><li><p>测试</p><p>此时的<code>server_name</code>可以先保留为服务器ip地址，先测试一下结果是否符合我们的预期。</p><p>直接运行<code>nginx</code>命令，开启nginx服务。确保</p><ol><li>域名解析到服务器ip地址</li><li>server_name为ip，也就是说还未绑定域名</li></ol><p>此时的结果应该是：既不能通过ip访问，也不能通过域名进行访问。如果结果不符合预期，请检查空主机头是否配置正确或者清除浏览器缓存重新加载！</p></li></ol></li><li><p>域名解析</p><p>略</p></li><li><p>服务器绑定域名</p><ol><li><p>停止ngixn服务</p></li><li><p>打开nginx.conf配置文件，在<code>server_name</code>处添加域名，和解析的域名保持相同即可。如果解析的是<code> xxxx.com</code>，那就写<code>xxxx.com</code>，不要写成<code>www.xxxx.com</code>!</p></li><li><p>重新启动ngixn服务</p></li></ol></li><li><p>最终测试</p><ol><li><p>在浏览器中可以通过域名访问！</p></li><li><p>在本地git中可以连接到域名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -v git@域名</span><br></pre></td></tr></table></figure></li></ol></li><li><p>修改本地hexo根目录站点配置文件</p><p>deploy部分既可以设置为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repository: git@服务器ip:/home/repo/hexo.git</span><br></pre></td></tr></table></figure><p>也可以设置为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repository: git@域名:/home/repo/hexo.git</span><br></pre></td></tr></table></figure><p>url部分由原来的<code>http://ip/</code>修改为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://域名/</span><br></pre></td></tr></table></figure></li></ol></li><li><p>开启https</p><p>当我们在浏览器中输入绑定的域名<code>xxxx.com</code>进行访问时，网址默认格式为<code>http://xxxx.com</code>，同时浏览器会提示网址不安全！而https是一种通过计算机网络进行安全通信的传输协议，经由http进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。所以开启https是非常有必要的！</p><ol><li><p>添加443端口</p><p>在服务器实例—安全组—配置规则—中添加443端口</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/443%E5%BC%80%E6%94%BE.png" alt="443开放"></p></li><li><p>购买下载SSL证书</p><p>阿里云每年可以免费申请20个证书，购买之后，点击申请证书，按照要求填写相关信息，等待生成即可</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/%E8%AF%81%E4%B9%A6%E9%85%8D%E7%BD%AE.png" alt="证书配置"></p><p>生成之后点击下载，选择nginx版本。</p></li><li><p>nginx.conf配置</p><p>登录服务器，执行以下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nginx -s quit # 停止服务</span><br><span class="line">cd /usr/local/nginx</span><br><span class="line">mkdir cert</span><br></pre></td></tr></table></figure><p>通过远程连接工具将下载到本地的ssl证书传送到cert目录下</p><p>打开nginx.conf文件，在443端口处配置以下内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl; # 如果您使用Nginx 1.15.0及以上版本，请使用listen 443 ssl代替listen 443和ssl on</span><br><span class="line">    server_name 绑定的域名; </span><br><span class="line">    ssl_certificate cert/cert-file-name.pem;  # 需要将cert-file-name.pem替换成已上传的证书文件的名称</span><br><span class="line">    ssl_certificate_key cert/cert-file-name.key; # 需要将cert-file-name.key替换成已上传的证书私钥文件的名称</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    location / &#123;</span><br><span class="line">        root html;  #站点目录。</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>同时还要添加禁止空主机头，在上述代码前加上如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen 443 ssl;</span><br><span class="line">server_name _;</span><br><span class="line">ssl_certificate 随便设置一个ssl证书;</span><br><span class="line">ssl_certificate_key 随便设置一个ssl证书的key;</span><br><span class="line">return 500;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置<code>http</code>请求自动跳转<code>https</code>，如果希望所有的<code>http</code>访问自动跳转到<code>https</code>页面，则可以在需要跳转的<code>http</code>站点下添加以下<code>rewrite</code>语句。（紫色方框区域）</p><p><img src="https://gxyblogpic.oss-cn-beijing.aliyuncs.com/img/80%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE.png" alt="80端口配置"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rewrite ^(.*)$ https://$host$1; #将所有HTTP请求通过rewrite指令重定向到HTTPS。</span><br></pre></td></tr></table></figure><p>注意，如果把80端口注释掉，只保留443端口的话，在访问网站时，只能输入<code>https://xxxx.com/</code>进行访问，无法直接输入<code>xxxx.com</code>访问，因为会自动跳转到<code>http://xxxx.com</code>，而该端口是被禁止的！</p></li><li><p>重新启动nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/nginx/sbin  #进入Nginx服务的可执行目录</span><br><span class="line">./nginx -s reload  #重新载入配置文件</span><br></pre></td></tr></table></figure><p>可能会出现的错误以及解决办法：</p><ol><li><pre><code>nginx: [emerg] the &quot;ssl&quot; parameter requires ngx_http_ssl_module in /...<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   缺少ngx_http_ssl_module模块。解决办法：戳[这里](https://www.cnblogs.com/ghjbk/p/6744131.html)，亲测有效</span><br><span class="line"></span><br><span class="line">2. ```</span><br><span class="line">   nginx: [emerg] cannot load certificate “/ssl/w“error:2006D080:BIO routines:BIO_new_file:no such file</span><br></pre></td></tr></table></figure>ssl文件相对路径错误。解决办法：查看`ssl_certificate`和`ssl_certificate_key`对应的ssl文件路径是否正确！</code></pre></li><li><pre><code>nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">端口被占用，解决办法：</span><br><span class="line"></span><br></pre></td></tr></table></figure># 方法一fuser -k 80/tcp  # 若是443端口出现问题，命令中的80换成443即可# 方法二ps -A | grep nginx   # 查看占用的进程号kill -9 pid1    # 杀死进程kill -9 pid2    # 杀死进程<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">5. 配置站点文件中的url</span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre></li></ol><p><a href="https://xn--eqrt2g/">https://域名/</a></p><pre><code></code></pre></li></ol><p>至此，已经全部配置完毕！在浏览器中输入域名，会自动跳转到<code>https://xxxx.com</code>，并且浏览器中不会出现安全提示信息！</p></li></ol><p>My Blog （在不同电脑上转移）</p><ol><li><p><a href="https://blog.csdn.net/m0_37450089/article/details/120939158">安装git</a>，node.js</p></li><li><p>在git中配置SSH key：解决本地和服务器连接的问题</p><ol><li>$ cd ~/. ssh #检查本机已存在的ssh密钥</li><li>ssh-keygen -t rsa -C “邮件地址”</li><li>连续三次回车，找到C:/user/.ssh/id_ras.pub文件，复制内容到GitHub主页-个人设置-SSH and GPG keys - New SSH key（内容粘贴到key中，title随便填写）</li><li>测试是否成功：ssh -T  <a href="mailto:git@github.com">git@github.com</a></li><li>成功后需要配置：<ul><li>git config --global <a href="http://user.name">user.name</a> “xxxx” // github用户名</li><li>git config --global user.email  “<a href="mailto:xxx@qq.com">xxx@qq.com</a>” // github注册邮箱</li></ul></li></ol></li><li><p>在git中通过 npm install -g hexo命令安装hexo</p></li><li><p>在blog目录(转移的)里运行git bash</p></li><li><p>命令</p><ul><li>hexo c 清除</li><li>hexo g  生成</li><li>hexo s  本地预览</li><li>hexo deploy 推送远端</li></ul></li><li><p>hexo+github创建个人博客</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 网站搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Github </tag>
            
            <tag> 云服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/16107/"/>
      <url>/posts/16107/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start">Quick Start</h2><h3 id="Create-a-new-post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
